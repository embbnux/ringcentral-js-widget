{"version":3,"sources":["components/NavigationBar/index.js"],"names":["NavigationBar","props","goTo","bind","mounted","state","currentVirtualPath","nextProps","setState","tab","path","virtualPath","setTimeout","className","button","childNavigationView","currentPath","tabWidth","tabs","fullSizeInk","NavigationButton","ChildNavigationView","_tabWidth","length","dropdownMenuTab","find","childTabs","isActive","dropdownMenu","styles","root","map","index","icon","activeIcon","Icon","ActiveIcon","some","childTab","slice","Component","tabPropTypes","PropTypes","oneOfType","func","node","label","string","noticeCounts","number","propTypes","isRequired","element","arrayOf","shape","bool","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\n\nexport default class NavigationBar extends Component {\n  constructor(props) {\n    super(props);\n    this.goTo = this.goTo.bind(this);\n    this.mounted = false;\n    this.state = {\n      currentVirtualPath: this.props.currentVirtualPath,\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentVirtualPath && this.mounted) {\n      this.setState({\n        currentVirtualPath: nextProps.currentVirtualPath,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  goTo(tab) {\n    this.props.goTo(tab.path, tab.virtualPath);\n    // seems like the goTo is asynchronous\n    // so here set timeout for resolving menu looks flash issue\n    setTimeout(() => {\n      if (this.mounted) {\n        this.setState({\n          currentVirtualPath: tab.virtualPath,\n        });\n      }\n    }, 10);\n  }\n\n  render() {\n    const {\n      className,\n      button,\n      childNavigationView,\n      currentPath,\n      tabWidth,\n      tabs,\n      fullSizeInk,\n    } = this.props;\n\n    const NavigationButton = button;\n    const ChildNavigationView = childNavigationView;\n\n    const currentVirtualPath = this.state.currentVirtualPath;\n    let _tabWidth = 0;\n    if (tabWidth) {\n      _tabWidth = tabWidth;\n    } else {\n      // Align equally fully\n      _tabWidth = tabs.length > 0 ?\n        `${(1 / tabs.length) * 100}%` :\n        0;\n    }\n    const dropdownMenuTab = tabs.find(tab =>\n      (\n        tab.childTabs &&\n        (tab.isActive && tab.isActive(currentPath, currentVirtualPath))\n      )\n    );\n    const dropdownMenu = dropdownMenuTab && dropdownMenuTab.childTabs;\n    return (\n      <nav className={classnames(styles.root, className)}>\n        {\n          tabs.map((tab, index) => {\n            let { icon, activeIcon } = tab;\n            if (typeof icon === 'function') {\n              const Icon = icon;\n              icon = (tab.childTabs ? <Icon currentPath={currentPath} /> : <Icon />);\n            }\n            if (typeof activeIcon === 'function') {\n              const ActiveIcon = activeIcon;\n              activeIcon = (tab.childTabs ?\n                <ActiveIcon currentPath={currentPath} /> : <ActiveIcon />);\n            }\n            return (\n              <NavigationButton\n                {...tab}\n                fullSizeInk={fullSizeInk}\n                key={index}\n                onClick={() => {\n                  this.goTo(tab);\n                }}\n                active={\n                  (tab.isActive && tab.isActive(currentPath, currentVirtualPath)) ||\n                  (tab.path && tab.path === currentPath) ||\n                  (tab.virtualPath && tab.virtualPath === currentVirtualPath) ||\n                  (tab.childTabs && tab.childTabs.some(childTab =>\n                    childTab.path === currentPath ||\n                    childTab.path === currentPath.slice(0, 9)\n                  ))\n                }\n                width={_tabWidth}\n                icon={icon}\n                activeIcon={activeIcon}\n              />\n            );\n          })\n        }\n        {\n          (ChildNavigationView && dropdownMenu && dropdownMenu.length) ? (\n            <ChildNavigationView\n              tabs={dropdownMenu}\n              goTo={this.goTo}\n              currentPath={currentPath}\n              currentVirtualPath={currentVirtualPath}\n            />\n          ) : null\n        }\n      </nav>\n    );\n  }\n}\n\nconst tabPropTypes = {\n  icon: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.node\n  ]),\n  activeIcon: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.node\n  ]),\n  label: PropTypes.string,\n  path: PropTypes.string,\n  virtualPath: PropTypes.string,\n  isActive: PropTypes.func,\n  noticeCounts: PropTypes.number,\n};\n\nNavigationBar.propTypes = {\n  className: PropTypes.string,\n  button: PropTypes.oneOfType([\n    PropTypes.func.isRequired,\n    PropTypes.element.isRequired\n  ]).isRequired,\n  childNavigationView: PropTypes.oneOfType([\n    PropTypes.func.isRequired,\n    PropTypes.element.isRequired\n  ]),\n  tabs: PropTypes.arrayOf(PropTypes.shape({\n    ...tabPropTypes,\n    childTabs: PropTypes.arrayOf(PropTypes.shape({\n      ...tabPropTypes,\n    })),\n  })),\n  goTo: PropTypes.func.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  currentVirtualPath: PropTypes.string,\n  tabWidth: PropTypes.string,\n  fullSizeInk: PropTypes.bool,\n};\n\nNavigationBar.defaultProps = {\n  className: undefined,\n  childNavigationView: undefined,\n  currentVirtualPath: undefined,\n  tabWidth: undefined,\n  tabs: [],\n  fullSizeInk: true,\n};\n"]}