{"version":3,"sources":["components/ConferenceParticipantPanel/index.js"],"names":["ParticipantsContainer","props","state","showModal","detail","formatPrticipants","onRemoveBtnClick","onCancel","onCancelNoAfter","participants","formatPhone","map","participant","partyNumber","setState","afterOnRemoveBtnClick","afterOnCancel","nextProps","find","id","currentLocale","removeFunc","onBackButtonClick","backHeader","styles","header","i18n","getString","root","participantsListContainer","participantsCount","length","participantsList","avatarUrl","toUserName","calleeType","calleeTypes","contacts","then","Component","propTypes","PropTypes","string","isRequired","func","arrayOf","object","defaultProps","i"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport calleeTypes from 'ringcentral-integration/enums/calleeTypes';\n\nimport BackButton from '../BackButton';\nimport BackHeader from '../BackHeader';\nimport ConfirmRemoveModal from './ConfirmRemoveModal';\nimport i18n from './i18n';\nimport ParticipantItem from './ParticipantItem';\nimport styles from './styles.scss';\n\nclass ParticipantsContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      detail: null,\n    };\n    this.formatPrticipants(props);\n    this.onRemoveBtnClick = this::this.onRemoveBtnClick;\n    this.onCancel = this::this.onCancel;\n    this.onCancelNoAfter = this::this.onCancelNoAfter;\n  }\n\n  formatPrticipants(props = this.props) {\n    const { participants, formatPhone } = props;\n\n    participants.map((participant) => {\n      participant.partyNumber = formatPhone(participant.partyNumber);\n      return participant;\n    });\n  }\n\n  onRemoveBtnClick(participant) {\n    this.setState(() => ({\n      detail: participant,\n      showModal: true,\n    }));\n    this.props.afterOnRemoveBtnClick();\n  }\n\n  onCancel() {\n    this.onCancelNoAfter();\n    this.props.afterOnCancel();\n  }\n  // onCancel without track\n  onCancelNoAfter() {\n    this.setState({\n      showModal: false,\n      detail: null,\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.formatPrticipants(nextProps);\n    if (this.state.showModal\n      && !nextProps.participants.find(\n        participant => participant.id === this.state.detail.id\n      )) {\n      this.onCancelNoAfter();\n    }\n  }\n\n  render() {\n    const {\n      participants,\n      currentLocale,\n      removeFunc,\n      onBackButtonClick,\n    } = this.props;\n\n    const { detail, showModal } = this.state;\n\n    const backHeader = (<BackHeader\n      className={styles.header}\n      onBackClick={onBackButtonClick}\n      backButton={<BackButton label={i18n.getString('conferenceCall', currentLocale)} />}\n    />);\n\n    return (\n      <div className={styles.root}>\n        {backHeader}\n        <div className={styles.participantsListContainer}>\n          <div className={styles.participantsCount}>\n            {\n              participants.length === 1\n              ? `${participants.length} ${i18n.getString('participant', currentLocale)}`\n              : `${participants.length} ${i18n.getString('participants', currentLocale)}`\n            }\n          </div>\n          <div className={styles.participantsList}>\n            {\n            participants.map((participant) => {\n              const {\n                avatarUrl,\n                toUserName,\n                partyNumber,\n                calleeType,\n                id,\n              } = participant;\n              let detail;\n\n              if (calleeType === calleeTypes.contacts) {\n                detail = toUserName;\n              } else {\n                detail = partyNumber;\n              }\n              return (\n                <ParticipantItem\n                  key={id}\n                  avatarUrl={avatarUrl}\n                  detail={detail}\n                  currentLocale={currentLocale}\n                  onRemove={() => this.onRemoveBtnClick(participant)}\n                />\n              );\n            })\n          }\n          </div>\n        </div>\n        <ConfirmRemoveModal\n          show={showModal}\n          detail={detail}\n          onCancel={this.onCancel}\n          currentLocale={currentLocale}\n          onRemove={\n            () => removeFunc(detail && detail.id).then(this.onCancelNoAfter)\n          } />\n      </div>\n    );\n  }\n}\n\n\nParticipantsContainer.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  removeFunc: PropTypes.func,\n  participants: PropTypes.arrayOf(PropTypes.object).isRequired,\n  onBackButtonClick: PropTypes.func,\n  formatPhone: PropTypes.func,\n  afterOnCancel: PropTypes.func,\n  afterOnRemoveBtnClick: PropTypes.func,\n};\n\nParticipantsContainer.defaultProps = {\n  removeFunc: i => i,\n  onBackButtonClick: i => i,\n  formatPhone: i => i,\n  afterOnCancel: i => i,\n  afterOnRemoveBtnClick: i => i,\n};\n\nexport default ParticipantsContainer;\n"]}