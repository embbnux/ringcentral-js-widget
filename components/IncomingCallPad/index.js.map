{"version":3,"sources":["components/IncomingCallPad/index.js"],"names":["IncomingCallPad","props","state","showForward","replyMessage","showReplyWithMessage","toVoiceMailEnabled","replyMessageEnabled","onShowForwardChange","visible","setState","closeForwardForm","onShowReplyWithMessageChange","onReplyMessageChange","message","closeReplyWithMessage","toVoiceMail","voicemailTimeout","setTimeout","reject","replyWithMessage","value","replyTimeout","newProps","sessionId","clearTimeout","currentLocale","answer","forwardingNumbers","formatPhone","className","hasOtherActiveCall","answerAndEnd","answerAndHold","multiCallButtons","styles","buttonRow","multiCallsButtonGroup","i18n","getString","callButton","voiceMailButton","VoicemailIcon","singleCallButtons","answerButtonGroup","bigCallButton","answerButton","AnswerIcon","root","forwardContainner","containner","replyWithMessageContainner","onForward","searchContact","searchContactList","phoneTypeRenderer","ForwardIcon","MessageIcon","IgnoreIcon","Component","propTypes","PropTypes","func","isRequired","string","array","bool","defaultProps","phone","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap_white.css';\n\nimport ForwardForm from '../ForwardForm';\nimport ReplyWithMessage from '../ReplyWithMessage';\nimport ActiveCallButton from '../ActiveCallButton';\nimport MultiCallAnswerButton from '../MultiCallAnswerButton';\n\nimport MessageIcon from '../../assets/images/MessageFill.svg';\nimport ForwardIcon from '../../assets/images/Forward.svg';\nimport IgnoreIcon from '../../assets/images/Ignore.svg';\nimport VoicemailIcon from '../../assets/images/Voicemail.svg';\nimport AnswerIcon from '../../assets/images/Answer.svg';\nimport styles from './styles.scss';\n\nimport i18n from './i18n';\n\nexport default class IncomingCallPad extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showForward: false,\n      replyMessage: null,\n      showReplyWithMessage: false,\n      toVoiceMailEnabled: true,\n      replyMessageEnabled: true,\n    };\n    this.onShowForwardChange = (visible) => {\n      this.setState({\n        showForward: visible,\n      });\n    };\n    this.closeForwardForm = () => {\n      this.onShowForwardChange(false);\n    };\n    this.onShowReplyWithMessageChange = (visible) => {\n      this.setState({\n        showReplyWithMessage: visible,\n      });\n    };\n    this.onReplyMessageChange = (message) => {\n      this.setState({ replyMessage: message });\n    };\n    this.closeReplyWithMessage = () => {\n      this.onShowReplyWithMessageChange(false);\n    };\n    this.toVoiceMail = () => {\n      this.props.toVoiceMail();\n      if (this.props.toVoiceMail) {\n        this.setState({\n          toVoiceMailEnabled: false\n        });\n        this.voicemailTimeout = setTimeout(() => {\n          this.props.reject();\n        }, 3000);\n      }\n    };\n    this.replyWithMessage = (value) => {\n      this.props.replyWithMessage(value);\n      if (this.props.replyWithMessage) {\n        this.setState({\n          replyMessageEnabled: false\n        });\n        this.replyTimeout = setTimeout(() => {\n          this.props.reject();\n        }, 3000);\n      }\n    };\n  }\n  componentWillReceiveProps(newProps) {\n    if (this.props.sessionId !== newProps.sessionId) {\n      if (this.replyTimeout) {\n        clearTimeout(this.replyTimeout);\n        this.replyTimeout = null;\n      }\n      if (this.voicemailTimeout) {\n        clearTimeout(this.voicemailTimeout);\n        this.voicemailTimeout = null;\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.replyTimeout) {\n      clearTimeout(this.replyTimeout);\n      this.replyTimeout = null;\n    }\n    if (this.voicemailTimeout) {\n      clearTimeout(this.voicemailTimeout);\n      this.voicemailTimeout = null;\n    }\n  }\n  render() {\n    const {\n      currentLocale,\n      reject,\n      answer,\n      forwardingNumbers,\n      formatPhone,\n      className,\n      hasOtherActiveCall,\n      answerAndEnd,\n      answerAndHold,\n    } = this.props;\n    // const isMultiCall = true;\n    const multiCallButtons = (\n      <div className={classnames(styles.buttonRow, styles.multiCallsButtonGroup)}>\n        <MultiCallAnswerButton\n          onClick={answerAndEnd}\n          title={i18n.getString('answerAndEnd', currentLocale)}\n          className={styles.callButton}\n          isEndOtherCall\n        />\n        <ActiveCallButton\n          onClick={this.toVoiceMail}\n          title={i18n.getString('toVoicemail', currentLocale)}\n          buttonClassName={this.state.toVoiceMailEnabled ? styles.voiceMailButton : ''}\n          icon={VoicemailIcon}\n          iconWidth={274}\n          iconX={116}\n          showBorder={!this.state.toVoiceMailEnabled}\n          className={styles.callButton}\n          disabled={!this.state.toVoiceMailEnabled}\n        />\n        <MultiCallAnswerButton\n          onClick={answerAndHold}\n          title={i18n.getString('answerAndHold', currentLocale)}\n          className={styles.callButton}\n          isEndOtherCall={false}\n        />\n      </div>\n    );\n    const singleCallButtons = (\n      <div className={classnames(styles.buttonRow, styles.answerButtonGroup)}>\n        <ActiveCallButton\n          onClick={this.toVoiceMail}\n          title={i18n.getString('toVoicemail', currentLocale)}\n          buttonClassName={this.state.toVoiceMailEnabled ? styles.voiceMailButton : ''}\n          icon={VoicemailIcon}\n          iconWidth={274}\n          iconX={116}\n          showBorder={!this.state.toVoiceMailEnabled}\n          className={styles.bigCallButton}\n          disabled={!this.state.toVoiceMailEnabled}\n        />\n        <ActiveCallButton\n          onClick={answer}\n          title={i18n.getString('answer', currentLocale)}\n          buttonClassName={styles.answerButton}\n          icon={AnswerIcon}\n          showBorder={false}\n          className={styles.bigCallButton}\n        />\n      </div>\n    );\n    return (\n      <div className={classnames(styles.root, className)}>\n        <div\n          className={styles.forwardContainner}\n          ref={(containner) => {\n            this.forwardContainner = containner;\n          }}\n        />\n        <div\n          className={styles.replyWithMessageContainner}\n          ref={(containner) => {\n            this.replyWithMessageContainner = containner;\n          }}\n        />\n        <div className={styles.buttonRow}>\n          <Tooltip\n            defaultVisible={false}\n            visible={this.state.showForward}\n            onVisibleChange={this.onShowForwardChange}\n            placement=\"topRight\"\n            trigger=\"click\"\n            arrowContent={<div className=\"rc-tooltip-arrow-inner\" />}\n            getTooltipContainer={() => this.forwardContainner}\n            overlay={\n              <ForwardForm\n                forwardingNumbers={forwardingNumbers}\n                currentLocale={currentLocale}\n                onCancel={this.closeForwardForm}\n                formatPhone={formatPhone}\n                onForward={this.props.onForward}\n                searchContact={this.props.searchContact}\n                searchContactList={this.props.searchContactList}\n                phoneTypeRenderer={this.props.phoneTypeRenderer}\n              />\n            }\n          >\n            <ActiveCallButton\n              icon={ForwardIcon}\n              iconWidth={250}\n              iconX={125}\n              onClick={() => null}\n              title={i18n.getString('forward', currentLocale)}\n              className={styles.callButton}\n            />\n          </Tooltip>\n          <Tooltip\n            defaultVisible={false}\n            visible={this.state.showReplyWithMessage}\n            onVisibleChange={this.onShowReplyWithMessageChange}\n            placement=\"top\"\n            trigger=\"click\"\n            arrowContent={<div className=\"rc-tooltip-arrow-inner\" />}\n            getTooltipContainer={() => this.replyWithMessageContainner}\n            overlay={\n              <ReplyWithMessage\n                currentLocale={currentLocale}\n                onCancel={this.closeReplyWithMessage}\n                value={this.state.replyMessage}\n                onChange={this.onReplyMessageChange}\n                onReply={this.replyWithMessage}\n                disabled={!this.state.replyMessageEnabled}\n              />\n            }\n          >\n            <ActiveCallButton\n              onClick={() => null}\n              icon={MessageIcon}\n              title={i18n.getString('reply', currentLocale)}\n              className={styles.callButton}\n            />\n          </Tooltip>\n          <ActiveCallButton\n            onClick={reject}\n            icon={IgnoreIcon}\n            title={i18n.getString('ignore', currentLocale)}\n            className={styles.callButton}\n          />\n        </div>\n        {hasOtherActiveCall ? multiCallButtons : singleCallButtons}\n      </div>\n    );\n  }\n}\n\nIncomingCallPad.propTypes = {\n  answer: PropTypes.func.isRequired,\n  reject: PropTypes.func.isRequired,\n  toVoiceMail: PropTypes.func.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  forwardingNumbers: PropTypes.array.isRequired,\n  formatPhone: PropTypes.func,\n  onForward: PropTypes.func.isRequired,\n  replyWithMessage: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  answerAndEnd: PropTypes.func,\n  answerAndHold: PropTypes.func,\n  hasOtherActiveCall: PropTypes.bool,\n  sessionId: PropTypes.string.isRequired,\n  searchContactList: PropTypes.array.isRequired,\n  searchContact: PropTypes.func.isRequired,\n  phoneTypeRenderer: PropTypes.func,\n};\n\nIncomingCallPad.defaultProps = {\n  formatPhone: phone => phone,\n  className: null,\n  answerAndEnd: () => null,\n  answerAndHold: () => null,\n  hasOtherActiveCall: false,\n  phoneTypeRenderer: undefined,\n};\n"]}