{"version":3,"sources":["containers/CallCtrlPage/index.js"],"names":["mapToProps","_","phone","webphone","locale","contactMatcher","regionSettings","brand","forwardingNumber","contactSearch","conferenceCall","callingSettings","rolesAndPermissions","params","children","sessionId","currentSession","sessions","find","session","id","activeSession","contactMapping","dataMapping","fromMatches","from","toMatches","to","nameMatches","direction","callDirections","outbound","isWebRTC","callingMode","callingModes","isInboundCall","inbound","isOnConference","hasConferenceCall","isMerging","conferenceCallParties","conferenceCallId","lastCallInfo","isConferenceCallOverload","conferenceCallEquipped","hasConferenceCallPermission","isConferenceSession","conferenceData","conferences","conference","isOverload","partyProfiles","fromSessionId","mergingPair","status","sessionStatus","finished","fullName","currentLocale","areaCode","countryCode","flipNumbers","showBackButton","searchContactList","sortedResult","showSpinner","mapToFunctions","routerInteraction","callMonitor","getAvatarUrl","onBackButtonClick","phoneTypeRenderer","phoneSourceNameRenderer","recipientsContactInfoRenderer","recipientsContactPhoneRenderer","getInitialLayout","layout","callCtrlLayouts","normalCtrl","conferenceCtrl","fromSession","x","activeSessionId","callStatus","onHold","mergeCtrl","formatPhone","phoneNumber","onHangup","hangup","mergeControlClickHangupTrack","onMute","mute","onUnmute","unmute","hold","onUnhold","unhold","onRecord","startRecord","onStopRecord","stopRecord","sendDTMF","value","updateSessionMatchedContact","contact","onFlip","flipNumber","flip","onTransfer","transferNumber","transfer","onPark","park","searchContact","debouncedSearch","searchString","onAdd","callControlClickAddTrack","validateCallRecording","otherOutboundCalls","call","webphoneSession","allCalls","length","push","fromNumber","setMergeParty","onBeforeMerge","conferenceSession","onMerge","parseMergingSessions","mergeSessions","gotoParticipantsCtrl","callControlClickParticipantAreaTrack","loadConference","confId","closeMergingPair","afterHideMergeConfirm","confirmMergeClickCloseTrack","afterConfirmMerge","confirmMergeClickMergeTrack","afterOnMerge","callControlClickMergeTrack","CallCtrlPage","CallCtrlContainer","default"],"mappings":"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","file":"index.js","sourcesContent":["import { find, filter } from 'ramda';\nimport { connect } from 'react-redux';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport callDirections from 'ringcentral-integration/enums/callDirections';\nimport callingModes from 'ringcentral-integration/modules/CallingSettings/callingModes';\nimport sessionStatus from 'ringcentral-integration/modules/Webphone/sessionStatus';\nimport { withPhone } from '../../lib/phoneContext';\nimport callCtrlLayouts from '../../enums/callCtrlLayouts';\nimport CallCtrlContainer from './CallCtrlContainer';\n\nfunction mapToProps(_, {\n  phone: {\n    webphone,\n    locale,\n    contactMatcher,\n    regionSettings,\n    brand,\n    forwardingNumber,\n    contactSearch,\n    conferenceCall,\n    callingSettings,\n    rolesAndPermissions,\n  },\n  params,\n  children,\n}) {\n  const sessionId = params && params.sessionId;\n  let currentSession;\n\n  if (sessionId) {\n    currentSession = webphone.sessions.find(session => session.id === sessionId) || {};\n  } else {\n    currentSession = webphone.activeSession || {};\n  }\n\n  const contactMapping = contactMatcher && contactMatcher.dataMapping;\n  const fromMatches = (contactMapping && contactMapping[currentSession.from]) || [];\n  const toMatches = (contactMapping && contactMapping[currentSession.to]) || [];\n  const nameMatches =\n    currentSession.direction === callDirections.outbound ? toMatches : fromMatches;\n\n  const isWebRTC = callingSettings.callingMode === callingModes.webphone;\n  const isInboundCall = currentSession.direction === callDirections.inbound;\n\n  let isOnConference = false;\n  let hasConferenceCall = false;\n  let isMerging = false;\n  let conferenceCallParties;\n  let conferenceCallId = null;\n  const lastCallInfo = conferenceCall && conferenceCall.lastCallInfo;\n  let isConferenceCallOverload = false;\n  const conferenceCallEquipped =\n    !!(conferenceCall && rolesAndPermissions.hasConferenceCallPermission);\n  if (conferenceCallEquipped) {\n    isOnConference = conferenceCall.isConferenceSession(currentSession.id);\n    const conferenceData = Object.values(conferenceCall.conferences)[0];\n\n    isMerging = conferenceCall.isMerging;\n\n    if (conferenceData && isWebRTC) {\n      conferenceCallId = conferenceData.conference.id;\n      isConferenceCallOverload = conferenceCall.isOverload(conferenceCallId);\n    }\n\n    hasConferenceCall = !!conferenceData;\n    conferenceCallParties = conferenceCall.partyProfiles;\n\n    const { fromSessionId } = conferenceCall.mergingPair;\n    if (\n      (!isInboundCall &&\n        (\n          fromSessionId &&\n          fromSessionId !== currentSession.id &&\n          lastCallInfo &&\n          lastCallInfo.status &&\n          lastCallInfo.status !== sessionStatus.finished\n        ))\n    ) {\n      // for mergeCtrl page, we don't show any children (container) component.\n      children = null;\n    }\n  }\n\n  return {\n    brand: brand.fullName,\n    nameMatches,\n    currentLocale: locale.currentLocale,\n    session: currentSession,\n    areaCode: regionSettings.areaCode,\n    countryCode: regionSettings.countryCode,\n    flipNumbers: forwardingNumber.flipNumbers,\n    showBackButton: true, // callMonitor.calls.length > 0,\n    searchContactList: contactSearch.sortedResult,\n    showSpinner: isMerging,\n    conferenceCallEquipped,\n    hasConferenceCall,\n    conferenceCallParties,\n    conferenceCallId,\n    lastCallInfo,\n    children,\n    isOnConference,\n    isWebRTC,\n    isConferenceCallOverload,\n  };\n}\n\nfunction mapToFunctions(_, {\n  phone: {\n    webphone,\n    regionSettings,\n    contactSearch,\n    conferenceCall,\n    routerInteraction,\n    callMonitor,\n  },\n  getAvatarUrl,\n  onBackButtonClick,\n  phoneTypeRenderer,\n  phoneSourceNameRenderer,\n  recipientsContactInfoRenderer,\n  recipientsContactPhoneRenderer,\n}) {\n  return {\n    getInitialLayout({\n      conferenceCallEquipped,\n      isOnConference,\n      lastCallInfo,\n      session\n    }) {\n      let layout = callCtrlLayouts.normalCtrl;\n\n      if (!conferenceCallEquipped) {\n        return layout;\n      }\n\n      if (isOnConference) {\n        return callCtrlLayouts.conferenceCtrl;\n      }\n      const isInboundCall = session.direction === callDirections.inbound;\n\n      const { fromSessionId } = conferenceCall.mergingPair;\n      const fromSession = find(x => x.id === fromSessionId, webphone.sessions);\n\n      const activeSessionId = webphone && webphone.activeSession && webphone.activeSession.id;\n\n      if (!isOnConference &&\n        !isInboundCall &&\n        (\n          fromSession &&\n          (fromSessionId !== session.id) &&\n          lastCallInfo\n        ) &&\n        (\n          session.callStatus !== sessionStatus.onHold ||\n          (session.callStatus === sessionStatus.onHold && session.id === activeSessionId)\n        )\n      ) {\n        // enter merge ctrl page.\n        layout = callCtrlLayouts.mergeCtrl;\n      }\n\n      return layout;\n    },\n    formatPhone: phoneNumber => formatNumber({\n      phoneNumber,\n      areaCode: regionSettings.areaCode,\n      countryCode: regionSettings.countryCode,\n    }),\n    onHangup(sessionId, layout) {\n      webphone.hangup(sessionId);\n      if (layout && layout === callCtrlLayouts.mergeCtrl) {\n        callMonitor.mergeControlClickHangupTrack();\n      }\n    },\n    onMute: sessionId => webphone.mute(sessionId),\n    onUnmute: sessionId => webphone.unmute(sessionId),\n    onHold: sessionId => webphone.hold(sessionId),\n    onUnhold(sessionId) {\n      webphone.unhold(sessionId);\n    },\n    onRecord: sessionId => webphone.startRecord(sessionId),\n    onStopRecord: sessionId => webphone.stopRecord(sessionId),\n    sendDTMF: (value, sessionId) => webphone.sendDTMF(value, sessionId),\n    updateSessionMatchedContact: (sessionId, contact) => (\n      webphone.updateSessionMatchedContact(sessionId, contact)\n    ),\n    getAvatarUrl,\n    onBackButtonClick,\n    onFlip: (flipNumber, sessionId) => webphone.flip(flipNumber, sessionId),\n    onTransfer: (transferNumber, sessionId) => webphone.transfer(transferNumber, sessionId),\n    onPark: sessionId => webphone.park(sessionId),\n    searchContact: searchString => (\n      contactSearch.debouncedSearch({ searchString })\n    ),\n    phoneTypeRenderer,\n    phoneSourceNameRenderer,\n    recipientsContactInfoRenderer,\n    recipientsContactPhoneRenderer,\n    onAdd(sessionId) {\n      // track user click add on call control\n      callMonitor.callControlClickAddTrack();\n      const session = find(x => x.id === sessionId, webphone.sessions);\n      if (!session || !conferenceCall.validateCallRecording(session)) {\n        return;\n      }\n      const otherOutboundCalls = filter(\n        call => call.direction === callDirections.outbound &&\n          (\n            call.webphoneSession &&\n            call.webphoneSession.id !== session.id\n          ),\n        callMonitor.allCalls\n      );\n      if (otherOutboundCalls.length) {\n        // goto 'calls on hold' page\n        routerInteraction.push(`/conferenceCall/callsOnhold/${session.fromNumber}/${session.id}`);\n      } else {\n        if (conferenceCall) {\n          conferenceCall.setMergeParty({ fromSessionId: sessionId });\n        }\n        // goto dialer directly\n        routerInteraction.push(`/conferenceCall/dialer/${session.fromNumber}/${sessionId}`);\n      }\n    },\n    onBeforeMerge(sessionId) {\n      const session = find(x => x.id === sessionId, webphone.sessions);\n      if (!session || !conferenceCall.validateCallRecording(session)) {\n        return false;\n      }\n      if (conferenceCall) {\n        const conferenceData = Object.values(conferenceCall.conferences)[0];\n        if (conferenceData) {\n          const conferenceSession = find(x => x.id === conferenceData.sessionId, webphone.sessions);\n          if (conferenceSession && !conferenceCall.validateCallRecording(conferenceSession)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    },\n    async onMerge(sessionId) {\n      const sessions = await conferenceCall.parseMergingSessions({ sessionId });\n      if (sessions) {\n        await conferenceCall.mergeSessions(sessions);\n      }\n    },\n\n    gotoParticipantsCtrl() {\n      routerInteraction.push('/conferenceCall/participants');\n      // track user click participant area on call control\n      callMonitor.callControlClickParticipantAreaTrack();\n    },\n    loadConference(confId) {\n      if (conferenceCall) {\n        conferenceCall.loadConference(confId);\n      }\n    },\n    closeMergingPair() {\n      return conferenceCall && conferenceCall.closeMergingPair();\n    },\n    setMergeParty(...args) {\n      return conferenceCall && conferenceCall.setMergeParty(...args);\n    },\n    // user action track functions\n    afterHideMergeConfirm: () => callMonitor.confirmMergeClickCloseTrack(),\n    afterConfirmMerge: () => callMonitor.confirmMergeClickMergeTrack(),\n    afterOnMerge: () => callMonitor.callControlClickMergeTrack()\n  };\n}\n\nconst CallCtrlPage = withPhone(connect(\n  mapToProps,\n  mapToFunctions,\n)(CallCtrlContainer));\n\nexport {\n  mapToProps,\n  mapToFunctions,\n  CallCtrlContainer,\n  CallCtrlPage as default,\n};\n"]}