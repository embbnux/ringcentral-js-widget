{"version":3,"sources":["lib/getWebpackConfig/index.js"],"names":["getWebpackConfig","getBaseConfig","themeFolder","module","rules","enforce","test","loader","use","exclude","options","plugins","autoprefixer","includePaths","path","resolve","process","cwd","outputStyle","webpack","optimize","ModuleConcatenationPlugin","env","base","DefinePlugin","NODE_ENV","UglifyJsPlugin","compress","warnings","screw_ie8","comments","sourceMap","devtool"],"mappings":";;;;;;;;;;;;;;;;;;;;;;kBAmFwBA,gB;;AAnFxB;;;;AACA;;;;AACA;;;;;;AAEA,SAASC,aAAT,OAEG;AAAA,MADDC,WACC,QADDA,WACC;;AACD,SAAO;AACLC,YAAQ;AACNC,aAAO,CACL;AACEC,iBAAS,KADX;AAEEC,cAAM,OAFR;AAGEC,gBAAQ;AAHV,OADK,EAML;AACED,cAAM,OADR;AAEEE,aAAK,CACH,cADG,EAEH,wCAFG,CAFP;AAMEC,iBAAS;AANX,OANK,EAcL;AACEH,cAAM,SADR;AAEEE,aAAK,CACH,cADG,EAEH,YAFG;AAFP,OAdK,EAqBL;AACEF,cAAM,2BADR;AAEEE,aAAK;AAFP,OArBK,EAyBL;AACEF,cAAM,OADR;AAEEG,iBAAS,OAFX;AAGED,aAAK,CACH,cADG,EAEH,kBAFG;AAHP,OAzBK,EAiCL;AACEF,cAAM,uCADR;AAEEE,aAAK;AAFP,OAjCK,EAqCL;AACEF,cAAM,eADR;AAEEE,aAAK,CACH;AACED,kBAAQ;AADV,SADG,EAIH,yEAJG,EAKH;AACEA,kBAAQ,gBADV;AAEEG,mBAAS;AACPC,qBAAS;AAAA,qBAAM,CACbC,sBADa,CAAN;AAAA;AADF;AAFX,SALG,EAaH;AACEL,kBAAQ,aADV;AAEEG,mBAAS;AACPG,0BAAc,CAACX,WAAD,EAAcY,eAAKC,OAAL,CAAaC,QAAQC,GAAR,EAAb,EAA4B,cAA5B,CAAd,CADP;AAEPC,yBAAa;AAFN;AAFX,SAbG;AAFP,OArCK,EA6DL;AACEZ,cAAM,QADR;AAEEE,aAAK;AAFP,OA7DK;AADD,KADH;AAqELG,aAAS,CACP,IAAIQ,kBAAQC,QAAR,CAAiBC,yBAArB,EADO;AArEJ,GAAP;AAyED;;AAGc,SAASrB,gBAAT,QAGZ;AAAA,wBAFDsB,GAEC;AAAA,MAFDA,GAEC,6BAFK,aAEL;AAAA,MADEZ,OACF;;AACD,MAAMa,OAAOtB,yCACRS,OADQ,EAAb;AAGA,MAAIY,QAAQ,YAAZ,EAA0B;AACxB,sCACKC,IADL;AAEEZ,0DACKY,KAAKZ,OADV,IAEE,IAAIQ,kBAAQK,YAAZ,CAAyB;AACvB,uBAAe;AACbC,oBAAU,yBAAe,YAAf;AADG;AADQ,OAAzB,CAFF,EAOE,IAAIN,kBAAQC,QAAR,CAAiBM,cAArB,CAAoC;AAClCC,kBAAU;AACRC,oBAAU,KADF;AAERC,qBAAW;AAFH,SADwB;AAKlCC,kBAAU,KALwB;AAMlCC,mBAAW;AANuB,OAApC,CAPF;AAFF;AAmBD;AACD,oCACKR,IADL;AAEES,aAAS,mBAFX;AAGErB,wDACKY,KAAKZ,OADV,IAEE,IAAIQ,kBAAQK,YAAZ,CAAyB;AACvB,qBAAe;AACbC,kBAAU,yBAAe,aAAf;AADG;AADQ,KAAzB,CAFF;AAHF;AAYD","file":"index.js","sourcesContent":["import autoprefixer from 'autoprefixer';\nimport path from 'path';\nimport webpack from 'webpack';\n\nfunction getBaseConfig({\n  themeFolder,\n}) {\n  return {\n    module: {\n      rules: [\n        {\n          enforce: 'pre',\n          test: /\\.js$/,\n          loader: 'source-map-loader',\n        },\n        {\n          test: /\\.js$/,\n          use: [\n            'babel-loader',\n            '@ringcentral-integration/locale-loader',\n          ],\n          exclude: /node_modules/,\n        },\n        {\n          test: /\\.css$/i,\n          use: [\n            'style-loader',\n            'css-loader',\n          ],\n        },\n        {\n          test: /\\.woff|\\.woff2|.eot|\\.ttf/,\n          use: 'url-loader?limit=15000&name=fonts/[name]_[hash].[ext]',\n        },\n        {\n          test: /\\.svg/,\n          exclude: /fonts/,\n          use: [\n            'babel-loader',\n            'react-svg-loader'\n          ]\n        },\n        {\n          test: /\\.png|\\.jpg|\\.gif|fonts(\\/|\\\\).*\\.svg/,\n          use: 'url-loader?limit=20000&name=images/[name]_[hash].[ext]',\n        },\n        {\n          test: /\\.sass|\\.scss/,\n          use: [\n            {\n              loader: 'style-loader',\n            },\n            'css-loader?modules&localIdentName=[path]_[name]_[local]_[hash:base64:5]',\n            {\n              loader: 'postcss-loader',\n              options: {\n                plugins: () => [\n                  autoprefixer\n                ]\n              }\n            },\n            {\n              loader: 'sass-loader',\n              options: {\n                includePaths: [themeFolder, path.resolve(process.cwd(), 'node_modules')],\n                outputStyle: 'expanded'\n              }\n            }\n          ],\n        },\n        {\n          test: /\\.ogg$/,\n          use: 'file-loader?name=audio/[name]_[hash].[ext]',\n        },\n      ],\n    },\n    plugins: [\n      new webpack.optimize.ModuleConcatenationPlugin()\n    ],\n  };\n}\n\n\nexport default function getWebpackConfig({\n  env = 'development',\n  ...options,\n}) {\n  const base = getBaseConfig({\n    ...options,\n  });\n  if (env === 'production') {\n    return {\n      ...base,\n      plugins: [\n        ...base.plugins,\n        new webpack.DefinePlugin({\n          'process.env': {\n            NODE_ENV: JSON.stringify('production'),\n          },\n        }),\n        new webpack.optimize.UglifyJsPlugin({\n          compress: {\n            warnings: false,\n            screw_ie8: true,\n          },\n          comments: false,\n          sourceMap: true,\n        }),\n      ],\n    };\n  }\n  return {\n    ...base,\n    devtool: 'inline-source-map',\n    plugins: [\n      ...base.plugins,\n      new webpack.DefinePlugin({\n        'process.env': {\n          NODE_ENV: JSON.stringify('development'),\n        },\n      }),\n    ],\n  };\n}\n"]}