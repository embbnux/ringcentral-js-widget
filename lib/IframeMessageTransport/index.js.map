{"version":3,"sources":["lib/IframeMessageTransport/index.js"],"names":["IframeMessageTransport","targetIframe","targetWindow","_onMessage","msg","data","_distributeMessage","_targetIframe","_targetWindow","window","addEventListener","removeEventListener","target","contentWindow","postMessage","MessageTransportCore"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEqBA,sB;;;AACnB,wCAGG;AAAA,QAFDC,YAEC,QAFDA,YAEC;AAAA,QADDC,YACC,QADDA,YACC;AAAA;;AAAA;;AAAA,UAMHC,UANG,GAMU,UAACC,GAAD,EAAS;AACpB,UAAIA,OAAOA,IAAIC,IAAf,EAAqB;AACnB,cAAKC,kBAAL,CAAwBF,IAAIC,IAA5B;AACD;AACF,KAVE;;AAED,UAAKE,aAAL,GAAqBN,YAArB;AACA,UAAKO,aAAL,GAAqBN,YAArB;AACAO,WAAOC,gBAAP,CAAwB,SAAxB,EAAmC,MAAKP,UAAxC;AAJC;AAKF;;;;8BAOS;AACRM,aAAOE,mBAAP,CAA2B,SAA3B,EAAsC,KAAKR,UAA3C;AACD;;;gCACWC,G,EAAK;AACf,UAAMQ,SAAS,KAAKJ,aAAL,IAAsB,KAAKD,aAAL,IAAsB,KAAKA,aAAL,CAAmBM,aAA9E;AACA,UAAID,MAAJ,EAAY;AACVA,eAAOE,WAAP,CAAmBV,GAAnB,EAAwB,GAAxB;AACD;AACF;;;EAxBiDW,8B;;kBAA/Bf,sB","file":"index.js","sourcesContent":["import MessageTransportCore from '../MessageTransportCore';\n\nexport default class IframeMessageTransport extends MessageTransportCore {\n  constructor({\n    targetIframe,\n    targetWindow,\n  }) {\n    super();\n    this._targetIframe = targetIframe;\n    this._targetWindow = targetWindow;\n    window.addEventListener('message', this._onMessage);\n  }\n  _onMessage = (msg) => {\n    if (msg && msg.data) {\n      this._distributeMessage(msg.data);\n    }\n  }\n\n  dispose() {\n    window.removeEventListener('message', this._onMessage);\n  }\n  postMessage(msg) {\n    const target = this._targetWindow || this._targetIframe && this._targetIframe.contentWindow;\n    if (target) {\n      target.postMessage(msg, '*');\n    }\n  }\n}\n"]}