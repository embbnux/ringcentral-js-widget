{"version":3,"sources":["modules/ContactSearch/getCacheReducer.js"],"names":["getContactSearchReducer","getCacheReducer","types","state","type","entities","sourceName","searchString","ttl","save","data","forEach","key","Date","now","timestamp","initSuccess","cleanUp","contactSearch"],"mappings":";;;;;;;;;;QAEgBA,uB,GAAAA,uB;kBA4BQC,e;;AA9BxB;;;;AAEO,SAASD,uBAAT,CAAiCE,KAAjC,EAAwC;AAC7C,SAAO,YAED;AAAA,QAFEC,KAEF,uEAFU,EAEV;AAAA;AAAA,QADJC,IACI,QADJA,IACI;AAAA,QADEC,QACF,QADEA,QACF;AAAA,QADYC,UACZ,QADYA,UACZ;AAAA,QADwBC,YACxB,QADwBA,YACxB;AAAA,QADsCC,GACtC,QADsCA,GACtC;;AACJ,YAAQJ,IAAR;AACE,WAAKF,MAAMO,IAAX;AAAiB;AACf,cAAMC,OAAO,EAAb;AACA,8BAAYP,KAAZ,EAAmBQ,OAAnB,CAA2B,UAACC,GAAD,EAAS;AAClC,gBAAIC,KAAKC,GAAL,KAAaX,MAAMS,GAAN,EAAWG,SAAxB,GAAoCP,GAAxC,EAA6C;AAC3CE,mBAAKE,GAAL,IAAYT,MAAMS,GAAN,CAAZ;AACD;AACF,WAJD;AAKA,cAAMA,MAASN,UAAT,SAAuBC,YAA7B;AACAG,eAAKE,GAAL,IAAY;AACVP,8BADU;AAEVU,uBAAWF,KAAKC,GAAL;AAFD,WAAZ;AAIA,iBAAOJ,IAAP;AACD;AACD,WAAKR,MAAMc,WAAX;AACA,WAAKd,MAAMe,OAAX;AACE,eAAO,EAAP;AACF;AACE,eAAOd,KAAP;AAnBJ;AAqBD,GAxBD;AAyBD;;AAEc,SAASF,eAAT,CAAyBC,KAAzB,EAAgC;AAC7C,SAAO,4BAAgB;AACrBgB,mBAAelB,wBAAwBE,KAAxB;AADM,GAAhB,CAAP;AAGD","file":"getCacheReducer.js","sourcesContent":["import { combineReducers } from 'redux';\n\nexport function getContactSearchReducer(types) {\n  return (state = {}, {\n    type, entities, sourceName, searchString, ttl\n  }) => {\n    switch (type) {\n      case types.save: {\n        const data = {};\n        Object.keys(state).forEach((key) => {\n          if (Date.now() - state[key].timestamp < ttl) {\n            data[key] = state[key];\n          }\n        });\n        const key = `${sourceName}-${searchString}`;\n        data[key] = {\n          entities,\n          timestamp: Date.now(),\n        };\n        return data;\n      }\n      case types.initSuccess:\n      case types.cleanUp:\n        return {};\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getCacheReducer(types) {\n  return combineReducers({\n    contactSearch: getContactSearchReducer(types),\n  });\n}\n"]}