{"version":3,"sources":["modules/ComposeText/index.js"],"names":["ComposeText","deps","dep","optional","alert","auth","storage","messageSender","numberValidate","contactSearch","rolesAndPermissions","options","actionTypes","composeTextActionTypes","_alert","_auth","_storage","_rolesAndPermissions","_storageKey","_reducer","_cacheReducer","_messageSender","_numberValidate","_contactSearch","_lastContactSearchResult","senderNumbersList","registerReducer","key","reducer","store","subscribe","_onStateChange","_shouldInit","dispatch","type","initSuccess","isFreshLogin","clean","_initSenderNumber","_shouldHandleRecipient","_handleRecipient","_shouldReset","_resetModuleStatus","ready","length","searchResult","resetSuccess","cachedPhoneNumber","cache","senderNumber","updateSenderNumber","phoneNumber","dummy","toNumbers","find","toNumber","entityType","recipient","item","id","addToNumber","slice","message","ttlConfig","messageSenderMessages","noAreaCode","ttl","warning","_validateIsOnlyPager","validateResult","validateFormat","result","error","errors","_alertWarning","recipientNumberInvalids","onlyPagerPermission","noSMSPermission","text","messageText","fromNumber","map","number","typingToNumber","_validatePhoneNumber","push","send","updateTypingToNumber","entityId","toNumberMatched","shouldClean","isAdded","cleanTypingToNumber","removeToNumber","textTooLong","updateMessageText","sending","alertMessage","messages","m","dismiss","getItem","state","status","moduleStatuses","toNumberEntity","RcModule","proxify"],"mappings":"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","file":"index.js","sourcesContent":["import { Module } from '../../lib/di';\nimport RcModule from '../../lib/RcModule';\nimport isBlank from '../../lib/isBlank';\nimport moduleStatuses from '../../enums/moduleStatuses';\n\nimport composeTextActionTypes from './actionTypes';\nimport getComposeTextReducer from './getComposeTextReducer';\nimport getCacheReducer from './getCacheReducer';\n\nimport messageSenderMessages from '../MessageSender/messageSenderMessages';\nimport proxify from '../../lib/proxy/proxify';\n/**\n * @class\n * @description Compose text managing module\n */\n@Module({\n  deps: [\n    'Alert',\n    'Auth',\n    'Storage',\n    'MessageSender',\n    'NumberValidate',\n    'RolesAndPermissions',\n    { dep: 'ContactSearch', optional: true },\n    { dep: 'ComposeTextOptions', optional: true }\n  ]\n})\nexport default class ComposeText extends RcModule {\n  /**\n   * @constructor\n   * @param {Object} params - params object\n   * @param {Alert} params.alert - alert module instance\n   * @param {Auth} params.auth - auth module instance\n   * @param {Storage} params.storage - storage module instance\n   * @param {MessageSender} params.messageSender - messageSender module instance\n   * @param {NumberValidate} params.numberValidate - numberValidate module instance\n   * @param {ContactSearch} params.contactSearch - contactSearch module instance\n   */\n  constructor({\n    alert,\n    auth,\n    storage,\n    messageSender,\n    numberValidate,\n    contactSearch,\n    rolesAndPermissions,\n    ...options\n  }) {\n    super({\n      ...options,\n      actionTypes: composeTextActionTypes,\n    });\n\n    this._alert = alert;\n    this._auth = auth;\n    this._storage = storage;\n    this._rolesAndPermissions = rolesAndPermissions;\n    this._storageKey = 'composeText';\n    this._reducer = getComposeTextReducer(this.actionTypes);\n    this._cacheReducer = getCacheReducer(this.actionTypes);\n    this._messageSender = messageSender;\n    this._numberValidate = numberValidate;\n    this._contactSearch = contactSearch;\n    this._lastContactSearchResult = [];\n    this.senderNumbersList = [];\n    storage.registerReducer({ key: this._storageKey, reducer: this._cacheReducer });\n  }\n\n  initialize() {\n    this.store.subscribe(() => this._onStateChange());\n  }\n\n  _onStateChange() {\n    if (\n      this._shouldInit()\n    ) {\n      this.senderNumbersList = this._messageSender.senderNumbersList;\n      this.store.dispatch({\n        type: this.actionTypes.initSuccess,\n      });\n      if (this._auth.isFreshLogin) {\n        this.clean();\n      }\n      this._initSenderNumber();\n    } else if (\n      this._shouldHandleRecipient()\n    ) {\n      this._handleRecipient();\n    } else if (\n      this._shouldReset()\n    ) {\n      this._resetModuleStatus();\n    }\n    if (\n      this.ready &&\n      this._messageSender.senderNumbersList.length !== this.senderNumbersList.length\n    ) {\n      this.senderNumbersList = this._messageSender.senderNumbersList;\n      this._initSenderNumber();\n    }\n  }\n\n  _shouldInit() {\n    return (\n      this._messageSender.ready &&\n      this._auth.ready &&\n      !this.ready\n    );\n  }\n\n  _shouldReset() {\n    return (\n      (\n        !this._messageSender.ready\n      ) &&\n      this.ready\n    );\n  }\n\n  _shouldHandleRecipient() {\n    return (\n      this.ready &&\n      (!!this._contactSearch &&\n        this._contactSearch.ready &&\n        this._contactSearch.searchResult.length > 0) &&\n      this._contactSearch.searchResult !== this._lastContactSearchResult\n    );\n  }\n\n  _resetModuleStatus() {\n    this.store.dispatch({\n      type: this.actionTypes.resetSuccess,\n    });\n  }\n\n  _initSenderNumber() {\n    const cachedPhoneNumber = this.cache && this.cache.senderNumber;\n    if (cachedPhoneNumber) {\n      this.updateSenderNumber(cachedPhoneNumber);\n    } else {\n      this.updateSenderNumber(\n        this._messageSender.senderNumbersList[0] &&\n        this._messageSender.senderNumbersList[0].phoneNumber\n      );\n    }\n  }\n\n  _handleRecipient() {\n    const dummy = this.toNumbers.find(toNumber => !toNumber.entityType);\n    if (dummy) {\n      const recipient = this._contactSearch.searchResult.find(\n        item => item.id === dummy.id\n      );\n      if (recipient) {\n        this.addToNumber(recipient);\n        this._lastContactSearchResult = this._contactSearch.searchResult.slice();\n      }\n    }\n  }\n\n  _alertWarning(message) {\n    if (message) {\n      const ttlConfig = message !== messageSenderMessages.noAreaCode\n        ? { ttl: 0 } : null;\n      this._alert.warning({\n        message,\n        ...ttlConfig\n      });\n      return true;\n    }\n    return false;\n  }\n\n  _validatePhoneNumber(phoneNumber) {\n    if (this._validateIsOnlyPager(phoneNumber)) {\n      return null;\n    }\n    const validateResult = this._numberValidate.validateFormat([phoneNumber]);\n    if (!validateResult.result) {\n      const error = validateResult.errors[0];\n      if (error && this._alertWarning(messageSenderMessages[error.type])) {\n        return false;\n      }\n      this._alertWarning(messageSenderMessages.recipientNumberInvalids);\n      return false;\n    }\n    return true;\n  }\n\n  _validateIsOnlyPager(phoneNumber) {\n    if (\n      phoneNumber.length >= 7 &&\n      this._rolesAndPermissions.onlyPagerPermission\n    ) {\n      this._alertWarning(messageSenderMessages.noSMSPermission);\n      return true;\n    }\n    return false;\n  }\n\n  @proxify\n  async send() {\n    const text = this.messageText;\n    const fromNumber = this.senderNumber;\n    const toNumbers = this.toNumbers.map(number => number.phoneNumber);\n    const { typingToNumber } = this;\n    if (!isBlank(typingToNumber)) {\n      if (this._validatePhoneNumber(typingToNumber)) {\n        toNumbers.push(typingToNumber);\n      } else {\n        return null;\n      }\n    }\n    return this._messageSender.send({ fromNumber, toNumbers, text });\n  }\n\n  @proxify\n  async updateSenderNumber(number) {\n    this.store.dispatch({\n      type: this.actionTypes.updateSenderNumber,\n      number: (number || ''),\n    });\n  }\n\n  @proxify\n  async updateTypingToNumber(number) {\n    if (number.length > 30) {\n      this._alertWarning(messageSenderMessages.recipientNumberInvalids);\n      return;\n    }\n    this.store.dispatch({\n      type: this.actionTypes.updateTypingToNumber,\n      number,\n    });\n  }\n\n  @proxify\n  async onToNumberMatch({ entityId }) {\n    this.store.dispatch({\n      type: this.actionTypes.toNumberMatched,\n      entityId,\n    });\n  }\n\n  @proxify\n  async addToRecipients(recipient, shouldClean = true) {\n    const isAdded = await this.addToNumber(recipient);\n    if (isAdded && shouldClean) {\n      await this.cleanTypingToNumber();\n    }\n  }\n\n  @proxify\n  async cleanTypingToNumber() {\n    this.store.dispatch({\n      type: this.actionTypes.cleanTypingToNumber,\n    });\n  }\n\n  @proxify\n  async addToNumber(number) {\n    if (isBlank(number.phoneNumber)) {\n      return false;\n    }\n    if (!this._validatePhoneNumber(number.phoneNumber)) {\n      return false;\n    }\n    this.store.dispatch({\n      type: this.actionTypes.addToNumber,\n      number,\n    });\n    return true;\n  }\n\n  @proxify\n  async removeToNumber(number) {\n    this.store.dispatch({\n      type: this.actionTypes.removeToNumber,\n      number,\n    });\n  }\n\n  @proxify\n  async updateMessageText(text) {\n    if (text.length > 1000) {\n      this._alertWarning(messageSenderMessages.textTooLong);\n      return;\n    }\n    this.store.dispatch({\n      type: this.actionTypes.updateMessageText,\n      text,\n    });\n  }\n\n  @proxify\n  async clean() {\n    this.store.dispatch({\n      type: this.actionTypes.clean,\n    });\n  }\n\n  @proxify\n  async alertMessageSending() {\n    this._alert.warning({\n      message: messageSenderMessages.sending,\n      ttl: 0,\n    });\n  }\n\n  @proxify\n  async dismissMessageSending() {\n    const alertMessage = this._alert.messages.find(m => (\n      m.message === messageSenderMessages.sending\n    ));\n    if (alertMessage && alertMessage.id) {\n      this._alert.dismiss(alertMessage.id);\n    }\n  }\n\n  get cache() {\n    return this._storage.getItem(this._storageKey);\n  }\n\n  get status() {\n    return this.state.status;\n  }\n\n  get ready() {\n    return this.status === moduleStatuses.ready;\n  }\n\n  get senderNumber() {\n    return this.state.senderNumber;\n  }\n\n  get typingToNumber() {\n    return this.state.typingToNumber;\n  }\n\n  get toNumbers() {\n    return this.state.toNumbers;\n  }\n\n  get toNumberEntity() {\n    return this.state.toNumberEntity;\n  }\n\n  get messageText() {\n    return this.state.messageText;\n  }\n}\n"]}