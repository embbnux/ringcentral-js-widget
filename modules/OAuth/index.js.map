{"version":3,"sources":["modules/OAuth/index.js"],"names":["OAuth","name","deps","dep","optional","redirectUri","options","oAuthReady","window","oAuthCallback","_handleCallbackUri","callbackUri","store","dispatch","type","actionTypes","setupOAuth","destroyOAuth","oAuthUri","OAuthBase","background","proxify"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAQqBA,K,WANpB,gBAAO;AACNC,QAAM,OADA;AAENC,QAAM,CACJ,EAAEC,KAAK,cAAP,EAAuBC,UAAU,IAAjC,EADI;AAFA,CAAP,C;;;AAOC,uBAGG;AAAA,gCAFDC,WAEC;AAAA,QAFDA,WAEC,oCAFa,iBAEb;AAAA,QADEC,OACF;AAAA;AAAA;AAECD;AAFD,OAGIC,OAHJ;AAKF;;;;;;;;;;;;AAOC,oBACE,CAAC,KAAKC,UADR,EAEE;AACAC,yBAAOC,aAAP,GAAuB;AAAA,2BAAe,OAAKC,kBAAL,CAAwBC,WAAxB,CAAf;AAAA,mBAAvB;AACA,uBAAKC,KAAL,CAAWC,QAAX,CAAoB;AAClBC,0BAAM,KAAKC,WAAL,CAAiBC;AADL,mBAApB;AAGD;;;;;;;;;;;;;;;;;;;;;;;;AAID,oBACE,KAAKT,UADP,EAEE;AACAC,yBAAOC,aAAP,GAAuB,IAAvB;AACA,uBAAKG,KAAL,CAAWC,QAAX,CAAoB;AAClBC,0BAAM,KAAKC,WAAL,CAAiBE;AADL,mBAApB;AAGD;;;;;;;;;;;;;;;;;;oCAIa;AACd,UAAI,KAAKV,UAAT,EAAqB;AACnB,iCAAU,KAAKW,QAAf,EAAyB,UAAzB,EAAqC,GAArC,EAA0C,GAA1C;AACD;AACF;;;wBAhCU;AACT,aAAO,OAAP;AACD;;;EAZgCC,mB,gEAchCC,oB,+JAWAA,oB,kKAYAC,iB;kBArCkBrB,K","file":"index.js","sourcesContent":["import background from 'ringcentral-integration/lib/background';\nimport proxify from 'ringcentral-integration/lib/proxy/proxify';\nimport popWindow from 'ringcentral-integration/lib/popWindow';\nimport { Module } from 'ringcentral-integration/lib/di';\n\nimport OAuthBase from '../../lib/OAuthBase';\n\n@Module({\n  name: 'OAuth',\n  deps: [\n    { dep: 'OAuthOptions', optional: true }\n  ],\n})\nexport default class OAuth extends OAuthBase {\n  constructor({\n    redirectUri = './redirect.html',\n    ...options\n  }) {\n    super({\n      redirectUri,\n      ...options,\n    });\n  }\n  get name() {\n    return 'OAuth';\n  }\n\n  @background\n  async setupOAuth() {\n    if (\n      !this.oAuthReady\n    ) {\n      window.oAuthCallback = callbackUri => this._handleCallbackUri(callbackUri);\n      this.store.dispatch({\n        type: this.actionTypes.setupOAuth,\n      });\n    }\n  }\n  @background\n  async destroyOAuth() {\n    if (\n      this.oAuthReady\n    ) {\n      window.oAuthCallback = null;\n      this.store.dispatch({\n        type: this.actionTypes.destroyOAuth,\n      });\n    }\n  }\n\n  @proxify\n  openOAuthPage() {\n    if (this.oAuthReady) {\n      popWindow(this.oAuthUri, 'rc-oauth', 600, 600);\n    }\n  }\n}\n"]}