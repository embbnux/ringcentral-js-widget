{"version":3,"sources":["modules/ConferenceCall/getConferenceCallReducer.js"],"names":["getConferenceCallStatusReducer","getMakeConferenceCallReducer","getMergingStatusReducer","getMergingPairReducer","getCurrentConferenceIdReducer","getConferenceCallReducer","types","state","conferenceCallStatus","idle","type","makeConference","terminateConference","updateConference","bringInConference","removeFromConference","getParty","requesting","makeConferenceSucceeded","makeConferenceFailed","terminateConferenceSucceeded","terminateConferenceFailed","updateConferenceSucceeded","updateConferenceFailed","bringInConferenceSucceeded","bringInConferenceFailed","removeFromConferenceSucceeded","removeFromConferenceFailed","getPartySucceeded","getPartyFailed","resetSuccess","conference","sessionId","partyProfile","res","id","profiles","mergeStart","mergeSucceeded","mergeFailed","fromSessionId","toSessionId","updateFromSession","updateToSession","closeMergingPair","conferenceId","updateCurrentConferenceId","initSuccess","status","conferences","isMerging","mergingPair","currentConferenceId"],"mappings":"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","file":"getConferenceCallReducer.js","sourcesContent":["import { combineReducers } from 'redux';\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\nimport conferenceCallStatus from './conferenceCallStatus';\n\nexport function getConferenceCallStatusReducer(types) {\n  return (state = conferenceCallStatus.idle, {\n    type\n  }) => {\n    switch (type) {\n      case types.makeConference:\n      case types.terminateConference:\n      case types.updateConference:\n      case types.bringInConference:\n      case types.removeFromConference:\n      case types.getParty:\n        return conferenceCallStatus.requesting;\n\n      case types.makeConferenceSucceeded:\n      case types.makeConferenceFailed:\n      case types.terminateConferenceSucceeded:\n      case types.terminateConferenceFailed:\n      case types.updateConferenceSucceeded:\n      case types.updateConferenceFailed:\n      case types.bringInConferenceSucceeded:\n      case types.bringInConferenceFailed:\n      case types.removeFromConferenceSucceeded:\n      case types.removeFromConferenceFailed:\n      case types.getPartySucceeded:\n      case types.getPartyFailed:\n      case types.resetSuccess:\n        return conferenceCallStatus.idle;\n\n      default:\n        return state;\n    }\n  };\n}\n\n\nexport function getMakeConferenceCallReducer(types) {\n  return (state = {}, {\n    type,\n    conference, // platform conference session data\n    sessionId, // session id of the conference\n    partyProfile,\n  }) => {\n    const res = {\n      ...state\n    };\n    switch (type) {\n      case types.resetSuccess:\n        return {};\n      case types.makeConferenceSucceeded:\n      case types.updateConferenceSucceeded:\n        res[conference.id] = {\n          conference,\n          sessionId,\n          profiles: (res[conference.id] && res[conference.id].profiles) || []\n        };\n        return res;\n      case types.bringInConferenceSucceeded:\n        res[conference.id] = {\n          conference,\n          sessionId,\n          profiles: [...res[conference.id].profiles, partyProfile]\n        };\n        return res;\n      case types.terminateConferenceSucceeded:\n        delete res[conference.id];\n        return res;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getMergingStatusReducer(types) {\n  return (state = false, { type }) => {\n    switch (type) {\n      case types.mergeStart:\n        return true;\n      case types.mergeSucceeded:\n      case types.mergeFailed:\n      case types.resetSuccess:\n        return false;\n      default:\n        return state;\n    }\n  };\n}\n\n/**\n * interface MergingPairState = {fromSessionId:string, toSessionId:string}\n *\n * The `from` and `to` is relative to the [adding call](https://app.zeplin.io/project/59df2e4346294d03f96d15a9/screen/5b2c64f7db2860b90ddd5939) flow\n * which is in [RCINT-7378](https://jira.ringcentral.com/browse/RCINT-7378)\n */\nexport function getMergingPairReducer(types) {\n  return (state = {}, { type, fromSessionId, toSessionId }) => {\n    switch (type) {\n      case types.updateFromSession:\n        return { fromSessionId };\n      case types.updateToSession:\n        return { ...state, toSessionId };\n      case types.closeMergingPair:\n      case types.mergeSucceeded:\n      case types.resetSuccess:\n        return {};\n      // restore the pair when failure\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getCurrentConferenceIdReducer(types) {\n  return (state = null, { type, conferenceId }) => {\n    switch (type) {\n      case types.updateCurrentConferenceId:\n        return conferenceId;\n      case types.initSuccess:\n      case types.resetSuccess:\n        return null;\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getConferenceCallReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    conferences: getMakeConferenceCallReducer(types),\n    conferenceCallStatus: getConferenceCallStatusReducer(types),\n    isMerging: getMergingStatusReducer(types),\n    mergingPair: getMergingPairReducer(types),\n    currentConferenceId: getCurrentConferenceIdReducer(types),\n  });\n}\n"]}