{"version":3,"sources":["integration-test/commons/Phone/index.js"],"names":["Phone","history","appKey","appSecret","server","appName","appVersion","brandId","brandName","brandFullName","redirectUri","proxyUri","options","cachePrefix","prefix","addModule","RingCentralClient","RingCentral","TabManager","getState","state","tabManager","GlobalStorage","globalStorage","Alert","alert","Brand","id","name","fullName","brand","Locale","locale","Environment","sdkConfig","client","environment","ConnectivityMonitor","checkConnectionFunc","connectivityMonitor","Auth","auth","Storage","storage","Subscription","subscription","ExtensionInfo","extensionInfo","RolesAndPermissions","rolesAndPermissions","AccountInfo","accountInfo","Presence","presence","AccountExtension","accountExtension","AccountPhoneNumber","accountPhoneNumber","DialingPlan","dialingPlan","ExtensionPhoneNumber","extensionPhoneNumber","ForwardingNumber","forwardingNumber","BlockedNumber","blockedNumber","RegionSettings","regionSettings","RateLimiter","rateLimiter","ContactMatcher","contactMatcher","ActivityMatcher","activityMatcher","CallingSettings","onFirstLogin","router","push","callingSettings","Softphone","softphone","Ringout","ringout","NumberValidate","numberValidate","Call","call","ContactSearch","contactSearch","addSearchSource","sourceName","searchFn","searchString","entityType","phoneNumber","phoneType","formatFn","entities","readyCheckFn","MessageSender","messageSender","ComposeText","composeText","MessageStore","messageStore","Conversations","conversations","ConferenceCall","pulling","conferenceCall","_reducer","app","version","reducer","RcModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AAUA;;;;;;IAGqBA,K;;;AACnB,mBAaQ;AAAA,mFAAJ,EAAI;;AAAA,QAZNC,OAYM,QAZNA,OAYM;AAAA,QAXNC,MAWM,QAXNA,MAWM;AAAA,QAVNC,SAUM,QAVNA,SAUM;AAAA,QATNC,MASM,QATNA,MASM;AAAA,QARNC,OAQM,QARNA,OAQM;AAAA,QAPNC,UAOM,QAPNA,UAOM;AAAA,QANNC,OAMM,QANNA,OAMM;AAAA,QALNC,SAKM,QALNA,SAKM;AAAA,QAJNC,aAIM,QAJNA,aAIM;AAAA,QAHNC,WAGM,QAHNA,WAGM;AAAA,QAFNC,QAEM,QAFNA,QAEM;AAAA,QADHC,OACG;AAAA;;AAAA,+JAEDA,OAFC;;AAKN,QAAMC,uBAAoBD,QAAQE,MAAR,SAAqBF,QAAQE,MAA7B,GAAwC,EAA5D,CAAN;;AAEA,UAAKC,SAAL,CAAe,QAAf,EAAyB,IAAIC,2BAAJ,CAAsB,IAAIC,qBAAJ,CAAgB;AAC7DJ,8BAD6D;AAE7DX,oBAF6D;AAG7DC,0BAH6D;AAI7DE,sBAJ6D;AAK7DC,4BAL6D;AAM7DF;AAN6D,KAAhB,CAAtB,CAAzB;AAQA,UAAKW,SAAL,CAAe,YAAf,EAA6B,IAAIG,oBAAJ,4BACxBN,OADwB;AAE3BO,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWC,UAAjB;AAAA;AAFiB,OAA7B;AAIA,UAAKN,SAAL,CAAe,eAAf,EAAgC,IAAIO,uBAAJ,4BAC3BV,OAD2B;AAE9BO,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWG,aAAjB;AAAA;AAFoB,OAAhC;AAIA,UAAKR,SAAL,CAAe,OAAf,EAAwB,IAAIS,eAAJ,4BACnBZ,OADmB;AAEtBO,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWK,KAAjB;AAAA;AAFY,OAAxB;;AAKA,UAAKV,SAAL,CAAe,OAAf,EAAwB,IAAIW,eAAJ,4BACnBd,OADmB;AAEtBe,UAAIpB,OAFkB;AAGtBqB,YAAMpB,SAHgB;AAItBqB,gBAAUpB,aAJY;AAKtBU,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWU,KAAjB;AAAA;AALY,OAAxB;AAOA,UAAKf,SAAL,CAAe,QAAf,EAAyB,IAAIgB,gBAAJ,4BACpBnB,OADoB;AAEvBO,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWY,MAAjB;AAAA;AAFa,OAAzB;AAIA,UAAKjB,SAAL,CAAe,aAAf,EAA8B,IAAIkB,qBAAJ,4BACzBrB,OADyB;AAE5BsB,iBAAW;AACTrB,gCADS;AAETX,sBAFS;AAGTC,4BAHS;AAITE,wBAJS;AAKTC,8BALS;AAMTF;AANS,OAFiB;AAU5B+B,cAAQ,MAAKA,MAVe;AAW5BZ,qBAAe,MAAKA,aAXQ;AAY5BJ,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWgB,WAAjB;AAAA;AAZkB,OAA9B;AAcA,UAAKrB,SAAL,CAAe,qBAAf,EAAsC,IAAIsB,6BAAJ,4BACjCzB,OADiC;AAEpCa,aAAO,MAAKA,KAFwB;AAGpCU,cAAQ,MAAKA,MAHuB;AAIpCC,mBAAa,MAAKA,WAJkB;AAKpCE,2BAAqB;AAAA,eAAM,IAAN;AAAA,OALe;AAMpCnB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWmB,mBAAjB;AAAA;AAN0B,OAAtC;AAQA,UAAKxB,SAAL,CAAe,MAAf,EAAuB,IAAIyB,cAAJ,4BAClB5B,OADkB;AAErBuB,cAAQ,MAAKA,MAFQ;AAGrBL,aAAO,MAAKA,KAHS;AAIrBE,cAAQ,MAAKA,MAJQ;AAKrBP,aAAO,MAAKA,KALS;AAMrBW,mBAAa,MAAKA,WANG;AAOrBf,kBAAY,MAAKA,UAPI;AAQrBV,wBARqB;AASrBD,8BATqB;AAUrBS,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWqB,IAAjB;AAAA;AAVW,OAAvB;AAYA,UAAK1B,SAAL,CAAe,SAAf,EAA0B,IAAI2B,iBAAJ,4BACrB9B,OADqB;AAExB6B,YAAM,MAAKA,IAFa;AAGxBtB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWuB,OAAjB;AAAA;AAHc,OAA1B;AAKA,UAAK5B,SAAL,CAAe,cAAf,EAA+B,IAAI6B,sBAAJ,4BAC1BhC,OAD0B;AAE7B6B,YAAM,MAAKA,IAFkB;AAG7BN,cAAQ,MAAKA,MAHgB;AAI7BQ,eAAS,MAAKA,OAJe;AAK7BxB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWyB,YAAjB;AAAA;AALmB,OAA/B;AAOA;AACA;AACA;AACA;AACA;AACA,UAAK9B,SAAL,CAAe,eAAf,EAAgC,IAAI+B,uBAAJ,4BAC3BlC,OAD2B;AAE9B6B,YAAM,MAAKA,IAFmB;AAG9BN,cAAQ,MAAKA,MAHiB;AAI9BQ,eAAS,MAAKA,OAJgB;AAK9BtB,kBAAY,MAAKA,UALa;AAM9BI,aAAO,MAAKA,KANkB;AAO9BN,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW2B,aAAjB;AAAA;AAPoB,OAAhC;AASA,UAAKhC,SAAL,CAAe,qBAAf,EAAsC,IAAIiC,6BAAJ,4BACjCpC,OADiC;AAEpC6B,YAAM,MAAKA,IAFyB;AAGpCE,eAAS,MAAKA,OAHsB;AAIpCR,cAAQ,MAAKA,MAJuB;AAKpCY,qBAAe,MAAKA,aALgB;AAMpC1B,kBAAY,MAAKA,UANmB;AAOpCI,aAAO,MAAKA,KAPwB;AAQpCN,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW6B,mBAAjB;AAAA;AAR0B,OAAtC;AAUA,UAAKlC,SAAL,CAAe,aAAf,EAA8B,IAAImC,qBAAJ,4BACzBtC,OADyB;AAE5B6B,YAAM,MAAKA,IAFiB;AAG5BE,eAAS,MAAKA,OAHc;AAI5BR,cAAQ,MAAKA,MAJe;AAK5Bd,kBAAY,MAAKA,UALW;AAM5B4B,2BAAqB,MAAKA,mBANE;AAO5BxB,aAAO,MAAKA,KAPgB;AAQ5BN,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW+B,WAAjB;AAAA;AARkB,OAA9B;AAUA,UAAKpC,SAAL,CAAe,UAAf,EAA2B,IAAIqC,kBAAJ,4BACtBxC,OADsB;AAEzB6B,YAAM,MAAKA,IAFc;AAGzBN,cAAQ,MAAKA,MAHY;AAIzBU,oBAAc,MAAKA,YAJM;AAKzBI,2BAAqB,MAAKA,mBALD;AAMzB9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWiC,QAAjB;AAAA;AANe,OAA3B;AAQA,UAAKtC,SAAL,CAAe,kBAAf,EAAmC,IAAIuC,0BAAJ,4BAC9B1C,OAD8B;AAEjC6B,YAAM,MAAKA,IAFsB;AAGjCN,cAAQ,MAAKA,MAHoB;AAIjCQ,eAAS,MAAKA,OAJmB;AAKjCE,oBAAc,MAAKA,YALc;AAMjCI,2BAAqB,MAAKA,mBANO;AAOjC9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWmC,gBAAjB;AAAA;AAPuB,OAAnC;AASA,UAAKxC,SAAL,CAAe,oBAAf,EAAqC,IAAIyC,4BAAJ,4BAChC5C,OADgC;AAEnC6B,YAAM,MAAKA,IAFwB;AAGnCN,cAAQ,MAAKA,MAHsB;AAInCQ,eAAS,MAAKA,OAJqB;AAKnCE,oBAAc,MAAKA,YALgB;AAMnCI,2BAAqB,MAAKA,mBANS;AAOnC9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWqC,kBAAjB;AAAA;AAPyB,OAArC;AASA,UAAK1C,SAAL,CAAe,aAAf,EAA8B,IAAI2C,qBAAJ,4BACzB9C,OADyB;AAE5B6B,YAAM,MAAKA,IAFiB;AAG5BE,eAAS,MAAKA,OAHc;AAI5BR,cAAQ,MAAKA,MAJe;AAK5Bd,kBAAY,MAAKA,UALW;AAM5B4B,2BAAqB,MAAKA,mBANE;AAO5B9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWuC,WAAjB;AAAA;AAPkB,OAA9B;AASA,UAAK5C,SAAL,CAAe,sBAAf,EAAuC,IAAI6C,8BAAJ,4BAClChD,OADkC;AAErC6B,YAAM,MAAKA,IAF0B;AAGrCE,eAAS,MAAKA,OAHuB;AAIrCR,cAAQ,MAAKA,MAJwB;AAKrCd,kBAAY,MAAKA,UALoB;AAMrC4B,2BAAqB,MAAKA,mBANW;AAOrC9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWyC,oBAAjB;AAAA;AAP2B,OAAvC;AASA,UAAK9C,SAAL,CAAe,kBAAf,EAAmC,IAAI+C,0BAAJ,4BAC9BlD,OAD8B;AAEjC6B,YAAM,MAAKA,IAFsB;AAGjCE,eAAS,MAAKA,OAHmB;AAIjCR,cAAQ,MAAKA,MAJoB;AAKjCd,kBAAY,MAAKA,UALgB;AAMjC4B,2BAAqB,MAAKA,mBANO;AAOjC9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW2C,gBAAjB;AAAA;AAPuB,OAAnC;AASA,UAAKhD,SAAL,CAAe,eAAf,EAAgC,IAAIiD,uBAAJ,4BAC3BpD,OAD2B;AAE9B6B,YAAM,MAAKA,IAFmB;AAG9BE,eAAS,MAAKA,OAHgB;AAI9BR,cAAQ,MAAKA,MAJiB;AAK9Bc,2BAAqB,MAAKA,mBALI;AAM9B9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW6C,aAAjB;AAAA;AANoB,OAAhC;AAQA,UAAKlD,SAAL,CAAe,gBAAf,EAAiC,IAAImD,wBAAJ,4BAC5BtD,OAD4B;AAE/B+B,eAAS,MAAKA,OAFiB;AAG/BlB,aAAO,MAAKA,KAHmB;AAI/BsB,qBAAe,MAAKA,aAJW;AAK/BY,mBAAa,MAAKA,WALa;AAM/BtC,kBAAY,MAAKA,UANc;AAO/BF,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW+C,cAAjB;AAAA;AAPqB,OAAjC;AASA,UAAKpD,SAAL,CAAe,aAAf,EAA8B,IAAIqD,qBAAJ,4BACzBxD,OADyB;AAE5Ba,aAAO,MAAKA,KAFgB;AAG5BU,cAAQ,MAAKA,MAHe;AAI5BC,mBAAa,MAAKA,WAJU;AAK5Bb,qBAAe,MAAKA,aALQ;AAM5BJ,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWiD,WAAjB;AAAA;AANkB,OAA9B;;AASA,UAAKtD,SAAL,CAAe,gBAAf,EAAiC,IAAIuD,wBAAJ,4BAC5B1D,OAD4B;AAE/B6B,YAAM,MAAKA,IAFoB;AAG/BE,eAAS,MAAKA,OAHiB;AAI/BxB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWmD,cAAjB;AAAA;AAJqB,OAAjC;AAMA,UAAKxD,SAAL,CAAe,iBAAf,EAAkC,IAAIyD,yBAAJ,4BAC7B5D,OAD6B;AAEhC6B,YAAM,MAAKA,IAFqB;AAGhCE,eAAS,MAAKA,OAHkB;AAIhCxB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWqD,eAAjB;AAAA;AAJsB,OAAlC;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAK1D,SAAL,CAAe,iBAAf,EAAkC,IAAI2D,yBAAJ,4BAC7B9D,OAD6B;AAEhCa,aAAO,MAAKA,KAFoB;AAGhCK,aAAO,MAAKA,KAHoB;AAIhCK,cAAQ,MAAKA,MAJmB;AAKhCQ,eAAS,MAAKA,OALkB;AAMhCI,qBAAe,MAAKA,aANY;AAOhCc,4BAAsB,MAAKA,oBAPK;AAQhCE,wBAAkB,MAAKA,gBARS;AAShCd,2BAAqB,MAAKA,mBATM;AAUhC0B,oBAAc,wBAAM;AAClB,cAAKC,MAAL,CAAY3E,OAAZ,CAAoB4E,IAApB,CAAyB,WAAzB,EADkB,CACqB;AACxC,OAZ+B;AAahC1D,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW0D,eAAjB;AAAA;AAbsB,OAAlC;AAeA,UAAK/D,SAAL,CAAe,WAAf,EAA4B,IAAIgE,mBAAJ,4BACvBnE,OADuB;AAE1BO,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW4D,SAAjB;AAAA,OAFgB;AAG1BlD,aAAO,MAAKA;AAHc,OAA5B;AAKA,UAAKf,SAAL,CAAe,SAAf,EAA0B,IAAIkE,iBAAJ,4BACrBrE,OADqB;AAExB6B,YAAM,MAAKA,IAFa;AAGxBN,cAAQ,MAAKA,MAHW;AAIxBhB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAW8D,OAAjB;AAAA;AAJc,OAA1B;AAMA,UAAKnE,SAAL,CAAe,gBAAf,EAAiC,IAAIoE,wBAAJ,4BAC5BvE,OAD4B;AAE/BkB,aAAO,MAAKA,KAFmB;AAG/BK,cAAQ,MAAKA,MAHkB;AAI/BoB,wBAAkB,MAAKA,gBAJQ;AAK/BY,sBAAgB,MAAKA,cALU;AAM/BhB,mBAAa,MAAKA,WANa;AAO/BhC,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWgE,cAAjB;AAAA;AAPqB,OAAjC;AASA,UAAKrE,SAAL,CAAe,MAAf,EAAuB,IAAIsE,cAAJ,4BAClBzE,OADkB;AAErBa,aAAO,MAAKA,KAFS;AAGrBU,cAAQ,MAAKA,MAHQ;AAIrB2C,uBAAiB,MAAKA,eAJD;AAKrBE,iBAAW,MAAKA,SALK;AAMrBrC,eAAS,MAAKA,OANO;AAOrBuC,eAAS,MAAKA,OAPO;AAQrBE,sBAAgB,MAAKA,cARA;AASrBjB,sBAAgB,MAAKA,cATA;AAUrBlB,2BAAqB,MAAKA,mBAVL;AAWrB9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWkE,IAAjB;AAAA;AAXW,OAAvB;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAKvE,SAAL,CAAe,eAAf,EAAgC,IAAIwE,uBAAJ,4BAC3B3E,OAD2B;AAE9B6B,YAAM,MAAKA,IAFmB;AAG9BE,eAAS,MAAKA,OAHgB;AAI9BxB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWoE,aAAjB;AAAA;AAJoB,OAAhC;AAMA,UAAKA,aAAL,CAAmBC,eAAnB,CAAmC;AACjCC,kBAAY,MADqB;AAEjCC,gBAAU;AAAA,YACRC,YADQ,SACRA,YADQ;AAAA,eAEJ,CAAC;AACLC,sBAAY,SADP;AAELjE,gBAAMgE,YAFD;AAGLE,uBAAa,aAHR;AAILC,qBAAW;AAJN,SAAD,CAFI;AAAA,OAFuB;AAUjCC,gBAAU;AAAA,eAAYC,QAAZ;AAAA,OAVuB;AAWjCC,oBAAc;AAAA,eAAM,IAAN;AAAA;AAXmB,KAAnC;;AAcA,UAAKnF,SAAL,CAAe,eAAf,EAAgC,IAAIoF,uBAAJ,4BAC3BvF,OAD2B;AAE9Ba,aAAO,MAAKA,KAFkB;AAG9BU,cAAQ,MAAKA,MAHiB;AAI9BhB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWgF,aAAjB;AAAA,OAJoB;AAK9BvC,4BAAsB,MAAKA,oBALG;AAM9Bd,qBAAe,MAAKA,aANU;AAO9BqC,sBAAgB,MAAKA;AAPS,OAAhC;;AAUA,UAAKrE,SAAL,CAAe,aAAf,EAA8B,IAAIsF,qBAAJ,4BACzBzF,OADyB;AAE5B6B,YAAM,MAAKA,IAFiB;AAG5BhB,aAAO,MAAKA,KAHgB;AAI5BkB,eAAS,MAAKA,OAJc;AAK5BxB,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWkF,WAAjB;AAAA,OALkB;AAM5BF,qBAAe,MAAKA,aANQ;AAO5BhB,sBAAgB,MAAKA,cAPO;AAQ5BnC,2BAAqB,MAAKA;AARE,OAA9B;;AAWA,UAAKlC,SAAL,CAAe,cAAf,EAA+B,IAAIwF,sBAAJ,4BAC1B3F,OAD0B;AAE7Ba,aAAO,MAAKA,KAFiB;AAG7BgB,YAAM,MAAKA,IAHkB;AAI7BN,cAAQ,MAAKA,MAJgB;AAK7BQ,eAAS,MAAKA,OALe;AAM7BE,oBAAc,MAAKA,YANU;AAO7BN,2BAAqB,MAAKA,mBAPG;AAQ7BU,2BAAqB,MAAKA,mBARG;AAS7B9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWoF,YAAjB;AAAA;AATmB,OAA/B;;AAYA,UAAKzF,SAAL,CAAe,eAAf,EAAgC,IAAI0F,uBAAJ,4BAC3B7F,OAD2B;AAE9Ba,aAAO,MAAKA,KAFkB;AAG9BgB,YAAM,MAAKA,IAHmB;AAI9BN,cAAQ,MAAKA,MAJiB;AAK9BiE,qBAAe,MAAKA,aALU;AAM9BI,oBAAc,MAAKA,YANW;AAO9BzD,qBAAe,MAAKA,aAPU;AAQ9BE,2BAAqB,MAAKA,mBARI;AAS9B9B,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWsF,aAAjB;AAAA;AAToB,OAAhC;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAK3F,SAAL,CAAe,gBAAf,EAAiC,IAAI4F,wBAAJ,4BAC5B/F,OAD4B;AAE/B6B,YAAM,MAAKA,IAFoB;AAG/BE,eAAS,MAAKA,OAHiB;AAI/BR,cAAQ,MAAKA,MAJkB;AAK/Bd,kBAAY,MAAKA,UALc;AAM/BI,aAAO,MAAKA,KANmB;AAO/B6D,YAAM,MAAKA,IAPoB;AAQ/BR,uBAAiB,MAAKA,eARS;AAS/B7B,2BAAqB,MAAKA,mBATK;AAU/B2D,eAAS,KAVsB;AAW/BzF,gBAAU;AAAA,eAAM,MAAKC,KAAL,CAAWyF,cAAjB;AAAA;AAXqB,OAAjC;;AAcA,UAAKC,QAAL,GAAgB,4BAAgB;AAC9BC,WAAK;AAAA,YAAC3F,KAAD,uEAAS;AACZQ,gBAAMvB,OADM;AAEZ2G,mBAAS1G;AAFG,SAAT;AAAA,eAGCc,KAHD;AAAA,OADyB;AAK9BC,kBAAY,MAAKA,UAAL,CAAgB4F,OALE;AAM9BxF,aAAO,MAAKA,KAAL,CAAWwF,OANY;AAO9BxE,YAAM,MAAKA,IAAL,CAAUwE,OAPc;AAQ9BnF,aAAO,MAAKA,KAAL,CAAWmF,OARY;AAS9B1E,2BAAqB,MAAKA,mBAAL,CAAyB0E,OAThB;AAU9BjF,cAAQ,MAAKA,MAAL,CAAYiF,OAVU;AAW9BpE,oBAAc,MAAKA,YAAL,CAAkBoE,OAXF;AAY9B;AACA1D,wBAAkB,MAAKA,gBAAL,CAAsB0D,OAbV;AAc9BxD,0BAAoB,MAAKA,kBAAL,CAAwBwD,OAdd;AAe9B9D,mBAAa,MAAKA,WAAL,CAAiB8D,OAfA;AAgB9BhE,2BAAqB,MAAKA,mBAAL,CAAyBgE,OAhBhB;AAiB9BlE,qBAAe,MAAKA,aAAL,CAAmBkE,OAjBJ;AAkB9BtD,mBAAa,MAAKA,WAAL,CAAiBsD,OAlBA;AAmB9BpD,4BAAsB,MAAKA,oBAAL,CAA0BoD,OAnBlB;AAoB9BlD,wBAAkB,MAAKA,gBAAL,CAAsBkD,OApBV;AAqB9BhD,qBAAe,MAAKA,aAAL,CAAmBgD,OArBJ;AAsB9B9C,sBAAgB,MAAKA,cAAL,CAAoB8C,OAtBN;AAuB9BnC,uBAAiB,MAAKA,eAAL,CAAqBmC,OAvBR;AAwB9B3B,YAAM,MAAKA,IAAL,CAAU2B,OAxBc;AAyB9B5C,mBAAa,MAAKA,WAAL,CAAiB4C,OAzBA;AA0B9B/B,eAAS,MAAKA,OAAL,CAAa+B,OA1BQ;AA2B9BjC,iBAAW,MAAKA,SAAL,CAAeiC,OA3BI;AA4B9B;AACA;AACA7E,mBAAa,MAAKA,WAAL,CAAiB6E,OA9BA;AA+B9B5D,gBAAU,MAAKA,QAAL,CAAc4D,OA/BM;AAgC9B1C,sBAAgB,MAAKA,cAAL,CAAoB0C,OAhCN;AAiC9BxC,uBAAiB,MAAKA,eAAL,CAAqBwC,OAjCR;AAkC9BtE,eAAS,MAAKA,OAAL,CAAasE,OAlCQ;AAmC9B;AACA1F,qBAAe,MAAKA,aAAL,CAAmB0F,OApCJ;AAqC9BzB,qBAAe,MAAKA,aAAL,CAAmByB,OArCJ;AAsC9B7B,sBAAgB,MAAKA,cAAL,CAAoB6B,OAtCN;AAuC9Bb,qBAAe,MAAKA,aAAL,CAAmBa,OAvCJ;AAwC9BX,mBAAa,MAAKA,WAAL,CAAiBW,OAxCA;AAyC9BT,oBAAc,MAAKA,YAAL,CAAkBS,OAzCF;AA0C9BP,qBAAe,MAAKA,aAAL,CAAmBO,OA1CJ;AA2C9B;AACAJ,sBAAgB,MAAKA,cAAL,CAAoBI;AA5CN,KAAhB,CAAhB;AA1YM;AAwbP;;;;wBAEU;AACT,aAAO,KAAK7F,KAAL,CAAW2F,GAAX,CAAenF,IAAtB;AACD;;;wBAEa;AACZ,aAAO,KAAKR,KAAL,CAAW2F,GAAX,CAAeC,OAAtB;AACD;;;EA9cgCE,kB;;AAXnC;;AAEA;;;AAGA;AACA;AACA;;AApBA;;kBAwBqBlH,K","file":"index.js","sourcesContent":["import RingCentral from 'ringcentral';\nimport RingCentralClient from 'ringcentral-client';\nimport { combineReducers } from 'redux';\n\nimport RcModule from '../../../lib/RcModule';\nimport AccountExtension from '../../../modules/AccountExtension';\nimport AccountInfo from '../../../modules/AccountInfo';\nimport Alert from '../../../modules/Alert';\nimport Auth from '../../../modules/Auth';\nimport AccountPhoneNumber from '../../../modules/AccountPhoneNumber';\nimport Brand from '../../../modules/Brand';\nimport BlockedNumber from '../../../modules/BlockedNumber';\nimport Call from '../../../modules/Call';\nimport CallingSettings from '../../../modules/CallingSettings';\nimport ConnectivityMonitor from '../../../modules/ConnectivityMonitor';\nimport DialingPlan from '../../../modules/DialingPlan';\nimport Environment from '../../../modules/Environment';\nimport ExtensionInfo from '../../../modules/ExtensionInfo';\nimport ExtensionPhoneNumber from '../../../modules/ExtensionPhoneNumber';\nimport ForwardingNumber from '../../../modules/ForwardingNumber';\nimport GlobalStorage from '../../../modules/GlobalStorage';\nimport Locale from '../../../modules/Locale';\nimport Presence from '../../../modules/Presence';\nimport RateLimiter from '../../../modules/RateLimiter';\nimport RegionSettings from '../../../modules/RegionSettings';\nimport Ringout from '../../../modules/Ringout';\nimport RolesAndPermissions from '../../../modules/RolesAndPermissions';\nimport Softphone from '../../../modules/Softphone';\nimport Storage from '../../../modules/Storage';\nimport Subscription from '../../../modules/Subscription';\nimport TabManager from '../../../modules/TabManager';\n// import RouterInteraction from 'ringcentral-js-widget/modules/RouterInteraction';\n\nimport NumberValidate from '../../../modules/NumberValidate';\nimport MessageSender from '../../../modules/MessageSender';\nimport ComposeText from '../../../modules/ComposeText';\nimport ContactSearch from '../../../modules/ContactSearch';\n\nimport MessageStore from '../../../modules/MessageStore';\nimport Conversations from '../../../modules/Conversations';\n\nimport ContactMatcher from '../../../modules/ContactMatcher';\nimport ActivityMatcher from '../../../modules/ActivityMatcher';\n\n// import DynamicsAdapter from '../../../modules/DynamicsInteraction';\n\n// import { callMonitorReducer } from '../CallMonitor/reducers';\n\n\n// import CallLog from '../CallLog';\n// import AutoLogger from '../AutoLogger';\n// import DataMatcher from '../DataMatcher';\nimport ConferenceCall from '../../../modules/ConferenceCall';\n\n\nexport default class Phone extends RcModule {\n  constructor({\n    history,\n    appKey,\n    appSecret,\n    server,\n    appName,\n    appVersion,\n    brandId,\n    brandName,\n    brandFullName,\n    redirectUri,\n    proxyUri,\n    ...options\n  } = {}) {\n    super({\n      ...options,\n    });\n\n    const cachePrefix = `sdk${options.prefix ? `-${options.prefix}` : ''}`;\n\n    this.addModule('client', new RingCentralClient(new RingCentral({\n      cachePrefix,\n      appKey,\n      appSecret,\n      appName,\n      appVersion,\n      server,\n    })));\n    this.addModule('tabManager', new TabManager({\n      ...options,\n      getState: () => this.state.tabManager,\n    }));\n    this.addModule('globalStorage', new GlobalStorage({\n      ...options,\n      getState: () => this.state.globalStorage,\n    }));\n    this.addModule('alert', new Alert({\n      ...options,\n      getState: () => this.state.alert,\n    }));\n\n    this.addModule('brand', new Brand({\n      ...options,\n      id: brandId,\n      name: brandName,\n      fullName: brandFullName,\n      getState: () => this.state.brand,\n    }));\n    this.addModule('locale', new Locale({\n      ...options,\n      getState: () => this.state.locale,\n    }));\n    this.addModule('environment', new Environment({\n      ...options,\n      sdkConfig: {\n        cachePrefix,\n        appKey,\n        appSecret,\n        appName,\n        appVersion,\n        server,\n      },\n      client: this.client,\n      globalStorage: this.globalStorage,\n      getState: () => this.state.environment,\n    }));\n    this.addModule('connectivityMonitor', new ConnectivityMonitor({\n      ...options,\n      alert: this.alert,\n      client: this.client,\n      environment: this.environment,\n      checkConnectionFunc: () => true,\n      getState: () => this.state.connectivityMonitor,\n    }));\n    this.addModule('auth', new Auth({\n      ...options,\n      client: this.client,\n      brand: this.brand,\n      locale: this.locale,\n      alert: this.alert,\n      environment: this.environment,\n      tabManager: this.tabManager,\n      proxyUri,\n      redirectUri,\n      getState: () => this.state.auth,\n    }));\n    this.addModule('storage', new Storage({\n      ...options,\n      auth: this.auth,\n      getState: () => this.state.storage,\n    }));\n    this.addModule('subscription', new Subscription({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      getState: () => this.state.subscription,\n    }));\n    // this.addModule('router', new RouterInteraction({\n    //   ...options,\n    //   history,\n    //   getState: () => this.state.router,\n    // }));\n    this.addModule('extensionInfo', new ExtensionInfo({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      tabManager: this.tabManager,\n      alert: this.alert,\n      getState: () => this.state.extensionInfo,\n    }));\n    this.addModule('rolesAndPermissions', new RolesAndPermissions({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      extensionInfo: this.extensionInfo,\n      tabManager: this.tabManager,\n      alert: this.alert,\n      getState: () => this.state.rolesAndPermissions,\n    }));\n    this.addModule('accountInfo', new AccountInfo({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      rolesAndPermissions: this.rolesAndPermissions,\n      alert: this.alert,\n      getState: () => this.state.accountInfo,\n    }));\n    this.addModule('presence', new Presence({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      subscription: this.subscription,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.presence,\n    }));\n    this.addModule('accountExtension', new AccountExtension({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      subscription: this.subscription,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.accountExtension,\n    }));\n    this.addModule('accountPhoneNumber', new AccountPhoneNumber({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      subscription: this.subscription,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.accountPhoneNumber,\n    }));\n    this.addModule('dialingPlan', new DialingPlan({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.dialingPlan,\n    }));\n    this.addModule('extensionPhoneNumber', new ExtensionPhoneNumber({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.extensionPhoneNumber,\n    }));\n    this.addModule('forwardingNumber', new ForwardingNumber({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.forwardingNumber,\n    }));\n    this.addModule('blockedNumber', new BlockedNumber({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.blockedNumber,\n    }));\n    this.addModule('regionSettings', new RegionSettings({\n      ...options,\n      storage: this.storage,\n      alert: this.alert,\n      extensionInfo: this.extensionInfo,\n      dialingPlan: this.dialingPlan,\n      tabManager: this.tabManager,\n      getState: () => this.state.regionSettings,\n    }));\n    this.addModule('rateLimiter', new RateLimiter({\n      ...options,\n      alert: this.alert,\n      client: this.client,\n      environment: this.environment,\n      globalStorage: this.globalStorage,\n      getState: () => this.state.rateLimiter,\n    }));\n\n    this.addModule('contactMatcher', new ContactMatcher({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      getState: () => this.state.contactMatcher,\n    }));\n    this.addModule('activityMatcher', new ActivityMatcher({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      getState: () => this.state.activityMatcher,\n    }));\n    // this.addModule('callLog', new CallLog({\n    //   ...options,\n    //   auth: this.auth,\n    //   client: this.client,\n    //   storage: this.storage,\n    //   regionSettings: this.regionSettings,\n    //   onFetchSuccess: () => {\n    //     this.contactMatcher.triggerMatch();\n    //     this.activityMatcher.triggerMatch();\n    //   },\n    //   getState: () => this.state.callLog,\n    // }));\n    // this.contactMatcher.addQuerySource({\n    //   sourceName: 'callLog',\n    //   getQueriesFn: this.callLog.getSelector('normalizedPhoneNumbers'),\n    //   readyCheckFn: () => this.callLog.ready,\n    // });\n    // this.contactMatcher.addSearchSource({\n    //   sourceName: 'dynamics',\n    //   searchFn: async ({ queries }) => this.adapter.matchEntities({ phoneNumbers: queries }),\n    //   readyCheckFn: () => this.adapter.ready,\n    // });\n    // this.activityMatcher.addQuerySource({\n    //   sourceName: 'callLog',\n    //   getQueriesFn: this.callLog.getSelector('callLogSessionIds'),\n    //   readyCheckFn: () => this.callLog.ready,\n    // });\n    // this.activityMatcher.addSearchSource({\n    //   sourceName: 'dynamics',\n    //   searchFn: async ({ queries }) => this.adapter.matchPhoneCalls({ sessionIds: queries }),\n    //   readyCheckFn: () => this.adapter.ready,\n    // });\n    this.addModule('callingSettings', new CallingSettings({\n      ...options,\n      alert: this.alert,\n      brand: this.brand,\n      client: this.client,\n      storage: this.storage,\n      extensionInfo: this.extensionInfo,\n      extensionPhoneNumber: this.extensionPhoneNumber,\n      forwardingNumber: this.forwardingNumber,\n      rolesAndPermissions: this.rolesAndPermissions,\n      onFirstLogin: () => {\n        this.router.history.push('/settings'); // TODO find a better solution\n      },\n      getState: () => this.state.callingSettings,\n    }));\n    this.addModule('softphone', new Softphone({\n      ...options,\n      getState: () => this.state.softphone,\n      brand: this.brand,\n    }));\n    this.addModule('ringout', new Ringout({\n      ...options,\n      auth: this.auth,\n      client: this.client,\n      getState: () => this.state.ringout,\n    }));\n    this.addModule('numberValidate', new NumberValidate({\n      ...options,\n      brand: this.brand,\n      client: this.client,\n      accountExtension: this.accountExtension,\n      regionSettings: this.regionSettings,\n      accountInfo: this.accountInfo,\n      getState: () => this.state.numberValidate,\n    }));\n    this.addModule('call', new Call({\n      ...options,\n      alert: this.alert,\n      client: this.client,\n      callingSettings: this.callingSettings,\n      softphone: this.softphone,\n      storage: this.storage,\n      ringout: this.ringout,\n      numberValidate: this.numberValidate,\n      regionSettings: this.regionSettings,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.call,\n    }));\n    // this.addModule('autoLogger', new AutoLogger({\n    //   ...options,\n    //   storage: this.storage,\n    //   getState: () => this.state.autoLogger,\n    // }));\n    // this.autoLogger.addLogHandler({\n    //   sourceName: 'dynamics',\n    //   handlerFn: async args => this.adapter.logCallBatch(args),\n    //   readyCheckFn: () => this.adapter.ready,\n    // });\n\n    this.addModule('contactSearch', new ContactSearch({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      getState: () => this.state.contactSearch,\n    }));\n    this.contactSearch.addSearchSource({\n      sourceName: 'test',\n      searchFn: ({\n        searchString\n      }) => [{\n        entityType: 'account',\n        name: searchString,\n        phoneNumber: '+1234567890',\n        phoneType: 'phone',\n      }],\n      formatFn: entities => entities,\n      readyCheckFn: () => true,\n    });\n\n    this.addModule('messageSender', new MessageSender({\n      ...options,\n      alert: this.alert,\n      client: this.client,\n      getState: () => this.state.messageSender,\n      extensionPhoneNumber: this.extensionPhoneNumber,\n      extensionInfo: this.extensionInfo,\n      numberValidate: this.numberValidate,\n    }));\n\n    this.addModule('composeText', new ComposeText({\n      ...options,\n      auth: this.auth,\n      alert: this.alert,\n      storage: this.storage,\n      getState: () => this.state.composeText,\n      messageSender: this.messageSender,\n      numberValidate: this.numberValidate,\n      rolesAndPermissions: this.rolesAndPermissions,\n    }));\n\n    this.addModule('messageStore', new MessageStore({\n      ...options,\n      alert: this.alert,\n      auth: this.auth,\n      client: this.client,\n      storage: this.storage,\n      subscription: this.subscription,\n      connectivityMonitor: this.connectivityMonitor,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.messageStore,\n    }));\n\n    this.addModule('conversations', new Conversations({\n      ...options,\n      alert: this.alert,\n      auth: this.auth,\n      client: this.client,\n      messageSender: this.messageSender,\n      messageStore: this.messageStore,\n      extensionInfo: this.extensionInfo,\n      rolesAndPermissions: this.rolesAndPermissions,\n      getState: () => this.state.conversations,\n    }));\n\n    // this.addModule('adapter', new DynamicsAdapter({\n    //   ...options,\n    //   auth: this.auth,\n    //   call: this.call,\n    //   composeText: this.composeText,\n    //   locale: this.locale,\n    //   router: this.router,\n    //   presence: this.presence,\n    //   storage: this.storage,\n    //   globalStorage: this.globalStorage,\n    //   regionSettings: this.regionSettings,\n    //   getState: () => this.state.adapter,\n    // }));\n\n    this.addModule('conferenceCall', new ConferenceCall({\n      ...options,\n      auth: this.auth,\n      storage: this.storage,\n      client: this.client,\n      tabManager: this.tabManager,\n      alert: this.alert,\n      call: this.call,\n      callingSettings: this.callingSettings,\n      rolesAndPermissions: this.rolesAndPermissions,\n      pulling: false,\n      getState: () => this.state.conferenceCall,\n    }));\n\n    this._reducer = combineReducers({\n      app: (state = {\n        name: appName,\n        version: appVersion,\n      }) => state,\n      tabManager: this.tabManager.reducer,\n      alert: this.alert.reducer,\n      auth: this.auth.reducer,\n      brand: this.brand.reducer,\n      connectivityMonitor: this.connectivityMonitor.reducer,\n      locale: this.locale.reducer,\n      subscription: this.subscription.reducer,\n      // router: this.router.reducer,\n      accountExtension: this.accountExtension.reducer,\n      accountPhoneNumber: this.accountPhoneNumber.reducer,\n      accountInfo: this.accountInfo.reducer,\n      rolesAndPermissions: this.rolesAndPermissions.reducer,\n      extensionInfo: this.extensionInfo.reducer,\n      dialingPlan: this.dialingPlan.reducer,\n      extensionPhoneNumber: this.extensionPhoneNumber.reducer,\n      forwardingNumber: this.forwardingNumber.reducer,\n      blockedNumber: this.blockedNumber.reducer,\n      regionSettings: this.regionSettings.reducer,\n      callingSettings: this.callingSettings.reducer,\n      call: this.call.reducer,\n      rateLimiter: this.rateLimiter.reducer,\n      ringout: this.ringout.reducer,\n      softphone: this.softphone.reducer,\n      // callLog: this.callLog.reducer,\n      // callMonitor: callMonitorReducer,\n      environment: this.environment.reducer,\n      presence: this.presence.reducer,\n      contactMatcher: this.contactMatcher.reducer,\n      activityMatcher: this.activityMatcher.reducer,\n      storage: this.storage.reducer,\n      // autoLogger: this.autoLogger.reducer,\n      globalStorage: this.globalStorage.reducer,\n      contactSearch: this.contactSearch.reducer,\n      numberValidate: this.numberValidate.reducer,\n      messageSender: this.messageSender.reducer,\n      composeText: this.composeText.reducer,\n      messageStore: this.messageStore.reducer,\n      conversations: this.conversations.reducer,\n      // adapter: this.adapter.reducer,\n      conferenceCall: this.conferenceCall.reducer,\n    });\n  }\n\n  get name() {\n    return this.state.app.name;\n  }\n\n  get version() {\n    return this.state.app.version;\n  }\n}\n"]}